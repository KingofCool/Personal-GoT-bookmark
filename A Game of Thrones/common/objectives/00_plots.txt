# Supported types:
# character, spouse, rivals, friends, liege_titles, vassal_titles, realm_titles, realm_characters, realm_characters_plus, independent_rulers

# plot_gain_liege_title	
# plot_weaken_lord_paramount				
# plot_gain_fellow_vassal_title		
# plot_gain_vassal_title
# plot_gain_crownlander_vassal
# plot_kill_character
# plot_kill_spouse
# plot_weaken_fellow_vassal
# plot_rescue_prisoner
# plot_buy_loyalty
# plot_replace_castellan
# plot_replace_chancellor
# plot_replace_marshal
# plot_replace_treasurer
# plot_replace_spymaster
# plot_kidnap_character
# plot_kidnap_liege
# plot_instigate_revolt
# plot_fabricate_treason
# plot_fabricate_treason_liege
# plot_kill_dragon
# plot_steal_valyrian_sword
# plot_investigate_legitimacy
# plot_replace_regent

###############
# PLOTS
###############

#################################
### Plots to Fabricate Claims ###
#################################

# Vassal ruler plots to gain claim on liege's title
plot_gain_liege_title = {
	type = liege_titles
	vassal_intrigue_plot = yes
	
	# Plotter scope
	potential = {
		is_ruler = yes
		prisoner = no
		age = 16
		independent = no
		mercenary = no
		is_theocracy = no
		is_landed = yes
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
		
		# # These would cause all kinds of problems
		can_press_claims_trigger = yes
		NOT = { trait = wildling }
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = wikid }
		liege = {
			NOT = { is_father = ROOT }
			NOT = { is_mother = ROOT }
		}
	}
	
	# Target scope
	target_potential = {
		NOT = { claimed_by = FROM }
		OR = { #Black Brothers can only target NW title
			FROM = { NOT = { trait = nightswatch } }
			NOT = { title = d_the_wall }
		}
		OR = {
			FROM = {
				primary_title = {
					OR = {
						dejure_liege_title = { title = ROOT }
						dejure_liege_title = { dejure_liege_title = { title = ROOT } }
					}	
				}
			}
			title = d_nightswatch
		}
	}
	
	# Target scope
	allow = {		
		NOT = { current_heir = { character = FROM } }			
		# If the character is Honorable, they must really hate the target for other reasons
		OR = {
			NOT = { FROM = { trait = honorable } }
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		}	
		
		OR = { # Just characters will not do this unless they believe the ruler is illegitimate
			FROM = { NOT = { trait = just } }
			holder_scope = {
				NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_fought_for_claimant } } 
				OR = {
					trait = bastard
					reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard }
					NOT = { culture_group = FROM }
					check_variable = { which = "tyrant" value = 10 }
				}
			}
		}	
		
		OR = { 	
			custom_tooltip = { #Owns traditional capital province
				text = TOOLTIPplot_gain_liege_titleCAPITAL
				hidden_tooltip = {
					capital_scope = { 
						owner = { 
							character = FROM 
							NOT = { tier = BARON }			
						} 
					}
				}	
			}	
			custom_tooltip = { #The title is the plotter's culture and the holder is a different culture group
				text = TOOLTIPplot_gain_liege_titleCULTURE
				hidden_tooltip = {
					culture = FROM
					holder_scope = { NOT = { culture_group = FROM } }
					OR = { #Valyrians can hold Volantis
						NOT = { title = k_volantis }
						NOT = { holder_scope = { culture_group = valyrian } }
					}
				}
			}	
			custom_tooltip = { #Any previous holder is either the same dynasty
				text = TOOLTIPplot_gain_liege_titleDYNASTY
				hidden_tooltip = { any_previous_holder = { dynasty = FROM } }
			}	
			custom_tooltip = { #Or is Great-GrandParent or closer
				text = TOOLTIPplot_gain_liege_titleRELATIVE
				hidden_tooltip = {
					FROM = { 
						OR = {
							father_even_if_dead = {
								OR = {
									has_landed_title = ROOT
									father_even_if_dead = {
										OR = {
											has_landed_title = ROOT
											father_even_if_dead = { has_landed_title = ROOT }
											mother_even_if_dead = { has_landed_title = ROOT }
										}	
									}
									mother_even_if_dead = {
										OR = {
											has_landed_title = ROOT
											father_even_if_dead = { has_landed_title = ROOT }
											mother_even_if_dead = { has_landed_title = ROOT }
										}
									}
								}	
							}
							mother_even_if_dead = {
								OR = {
									has_landed_title = ROOT
									father_even_if_dead = {
										OR = {
											has_landed_title = ROOT
											father_even_if_dead = { has_landed_title = ROOT }
											mother_even_if_dead = { has_landed_title = ROOT }
										}	
									}
									mother_even_if_dead = {
										OR = {
											has_landed_title = ROOT
											father_even_if_dead = { has_landed_title = ROOT }
											mother_even_if_dead = { has_landed_title = ROOT }
										}
									}
								}	
							}
						}
					}
				}	
			}	
			FROM = { #Is exceptionally strong
				relative_power_to_liege = 0.66
				prestige = 750
			}
			custom_tooltip = { #Black brothers can do this rarely
				text = TOOLTIPplot_gain_liege_titleBLACKBROTHER
				hidden_tooltip = {	
					FROM = { 
						trait = nightswatch
						trait = ambitious
						trait = ruthless
						trait = proud
					}
					holder_scope = { trait = nightswatch }
				}	
			}
		}	
	}
	
	chance = {
		factor = 5 # Must always be an integer
		
		modifier = {
			factor = 0
			holder_scope = { reverse_opinion = { who = FROM value = 50 } }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}	
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					is_close_relative = PREV
					OR = {
						opinion = { who = PREV value = 15 }
						trait = familyperson
					}
					NOT = { trait = ruthless }
				}
			}	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.56
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.68
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2.32
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -99 } } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			holder_scope = { FROM = { is_foe = PREV } }
		}
		
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			holder_scope = { NOT = { religion = FROM } }
		}
		
		modifier = { #Republics wont do this unless they own capital province
			factor = 0
			FROM = { is_republic = yes }
			NOT = { capital_scope = { owner = {  character = FROM } } }
		}
		
		# Ambition modifiers
		modifier = {
			factor = 10
			title = e_iron_throne
			FROM = { has_ambition = obj_bloodline_iron_throne }
		}
		modifier = {
			factor = 10
			tier = EMPEROR
			FROM = { has_ambition = obj_become_king }
		}
		modifier = {
			factor = 10
			FROM = { has_ambition = obj_become_lord_paramount }
		}
		# modifier = {
			# factor = 10
			# tier = DUKE
			# FROM = { has_ambition = obj_become_a_duke }
		# }
		modifier = { #Nationalism
			factor = 10
			culture = FROM
			holder_scope = { NOT = { culture_group = FROM } }
			OR = { #Valyrians can hold Volantis
				NOT = { title = k_volantis }
				NOT = { holder_scope = { culture_group = valyrian } }
			}
		}
		modifier = { #Owns Capital
			factor = 5
			capital_scope = { 
				owner = { 
					character = FROM 
					NOT = { tier = BARON }			
				} 
			}
		}
		#Power
		modifier = {
			factor = 2
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 2
			FROM = { relative_power_to_liege = 0.25 }
		}
		modifier = {
			factor = 2
			FROM = { relative_power_to_liege = 0.4 }
		}
		
		# Tier modifiers
		modifier = {
			factor = 2
			tier = DUKE
		}
		modifier = {
			factor = 3
			tier = KING
		}
		modifier = {
			factor = 4
			tier = EMPEROR
		}
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = { 
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5 
				}	
			}
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			holder_scope = { 
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5 
				}	
			}
		}	
	}
	
	success = {
		claimed_by = FROM
	}
	abort = {
		OR = {
			holder_scope = {
				character = FROM
			}
			has_holder = no
			FROM = { has_character_flag = abort_plot }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_gain_liege_title_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
	effect = {		
		FROM = {
			if = {
				limit = {
					NOT = { intrigue = 10 }
				}
				change_intrigue = 1
			}
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = PREV
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_gain_liege_title_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
}

plot_weaken_lord_paramount = {
	type = realm_characters_plus
	military_plot = yes
	
	potential = {
		prisoner = no
		age = 16
		NOT = { trait = incapable }
		tier = EMPEROR
		is_nomadic = no
		NOT = { culture_group = unoccupied_group }
		NOT = { culture_group = winter_group }
		
		OR = {
			ai = no
			NOT = { has_character_flag = plot_cooldown }
			had_character_flag = {
				flag = plot_cooldown
				days = 3650
			}
		}
	}
	
	# Target scope
	target_potential = {
		tier = KING
		liege = { character = FROM } #must be vassal of plotter
		num_of_king_titles = 2
	}
	
	allow = {
		num_of_king_titles = 3 #must have 3 LP titles
		
		#Must not be married to or parent of target
		NOT = { is_married = FROM }
		NOT = { reverse_has_truce = FROM  }
		NOT = { is_child_of = FROM }
				
		# An honorable ruler can only take this plot against characters who have already proven themselves dangerous
		OR = {
			NOT = { FROM = { trait = honorable } }
			reverse_has_opinion_modifier = { who = FROM modifier = declared_war }
			reverse_has_opinion_modifier = { who = FROM modifier = opinion_traitor }
			reverse_has_opinion_modifier = { who = FROM modifier = opinion_dishonorable }
			reverse_has_opinion_modifier = { who = FROM modifier = opinion_vengeance }
			reverse_has_opinion_modifier = { who = FROM modifier = opinion_joined_rebellion }
		}
	}
	
	chance = { 
		factor = 5
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0.1
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = paranoid }
		}
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
		
		# More likely to attempt this plot against ambitious lords paramount
		modifier = {
			factor = 2
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = ruthless
		}
		modifier = {
			factor = 0.25
			trait = content
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.25
			trait = honorable
		}
		modifier = {
			factor = 1.25
			trait = proud
		}
		modifier = {
			factor = 0.8
			trait = humble
		}
	
		# MUCH more likely to pick this objective if friends with a Lord Paramount
		# who has a negative opinion of the holder
		modifier = {
			factor = 2
			FROM = {
				any_vassal = {
					opinion = { who = FROM value = 100 }
					NOT = { opinion = { who = ROOT value = 0 } }
					tier = KING
				}
			}
		}	
	}
	
	success = { 
		is_alive = yes
		NOT = { num_of_king_titles = 3 } 
	}
	
	abort = {
		OR = {
			FROM = {
				OR = {
					prisoner = yes
					has_character_flag = abort_plot
					NOT = { tier = EMPEROR }
				}
			}	
			NOT = { tier = KING }
			is_alive = no
			NOR = {
				liege = { character = FROM }
				liege_before_war = { character = FROM }
				war_with = FROM
			}
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
				clr_character_flag = plot_weaken_lp_ultimatum_decision_taken
				set_character_flag = plot_cooldown
			}
		}
		clr_character_flag = kingdom_found 
	}
	effect = {
		FROM = {
			prestige = 100
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_weaken_lp_ultimatum_decision_taken
				any_plot_backer = { 
					if = {
						limit = { tier = DUKE }
						character_event = { id = plot_event.37 days = 100 random = 50 }
					}
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}
		}
		clr_character_flag = kingdom_found 
	}
}

# Vassal ruler plots to gain claim on a fellow vassal's title
plot_gain_fellow_vassal_title = {
	type = realm_titles
	vassal_intrigue_plot = yes
	
	# Plotter scope
	potential = {
		is_playable = yes
		prisoner = no
		age = 16
		OR = {
			is_feudal = yes
			is_tribal = yes
		}
		is_landed = yes
		independent = no
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
		NOT = { trait = just }
		
		# # These would cause all kinds of problems
		can_press_claims_trigger = yes
		NOT = { culture_group = unoccupied_group }
	}
	
	# Target scope
	target_potential = {
		FROM = {
			OR = {
				any_demesne_title = {
					dejure_liege_title = {
						title = ROOT
					}
				}
				primary_title = {
					de_jure_vassal_or_below = ROOT
				}
			}
		}
		holder_scope = {
			is_ruler = yes
			is_landed = yes
			independent = no
			NOT = { is_liege_of = FROM }
			same_liege = FROM
			NOT = { character = FROM }
			NOT = { culture_group = unoccupied_group }
		}
	}
	
	# Target scope
	allow = {
		holder_scope = {
			OR = {
				is_feudal = yes
				is_tribal = yes
			}		
			higher_tier_than = BARON			
		}
		NOT = { claimed_by = FROM }
		current_heir = {
			NOT = { character = FROM }
		}	
		# If the character is Honorable, they must really hate the target for other reasons
		OR = {
			NOT = { FROM = { trait = honorable } }
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		}		
	}
	
	chance = {
		factor = 2 # Must be an integer
		
		modifier = {
			factor = 0
			holder_scope = { reverse_opinion = { who = FROM value = 50 } }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}	
		modifier = {
			factor = 0.1
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					is_close_relative = PREV
					OR = {
						opinion = { who = PREV value = 15 }
						trait = familyperson
					}
					NOT = { trait = ruthless }
				}
			}	
		}
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.56
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.68
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2.32
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -99 } } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			holder_scope = { FROM = { is_foe = PREV } }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			holder_scope = { NOT = { religion = FROM } }
		}
		
		# Tier modifiers
		modifier = {
			factor = 2
			tier = DUKE
		}
		modifier = {	
			factor = 3
			tier = KING
		}
		
		# Ambition modifiers
		# modifier = {
			# factor = 10
			# tier = DUKE
			# FROM = { has_ambition = obj_become_a_duke }
		# }
		modifier = {
			factor = 10
			tier = KING
			FROM = { has_ambition = obj_become_lord_paramount }
		}
		# modifier = {
			# factor = 10
			# tier = COUNT
			# FROM = {
				# OR = {
					# has_ambition = obj_increase_demesne_1
					# has_ambition = obj_increase_demesne_2
					# has_ambition = obj_increase_demesne_3
					# has_ambition = obj_increase_demesne_4
					# has_ambition = obj_increase_demesne_5
				# }
			# }
		# }
	}
	
	success = { 
		claimed_by = FROM
	}
	abort = {
		OR = {
			holder_scope = {
				character = FROM
			}
			has_holder = no
			FROM = { has_character_flag = abort_plot }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_gain_fellow_vassal_title_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
	effect = {
		FROM = {
			change_intrigue = 1
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_gain_fellow_vassal_title_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
}
 
# Gain one of a vassal's landed titles
plot_gain_vassal_title = {
	type = vassal_titles
	vassal_rank_plot = yes
	
	# Plotter scope
	potential = {
		is_playable = yes
		prisoner = no
		is_patrician = no
		is_merchant_republic = no
		age = 16
		primary_title = {
			higher_tier_than = COUNT
			temporary = no
		}
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
		
		OR = {
			ai = no
			war = no
		}
		
		# # These would cause all kinds of problems
		can_press_claims_trigger = yes
		NOT = { culture_group = unoccupied_group }
	}
	
	# Target scope
	target_potential = {
		NOT = { title = d_kingsguard }
		# No barony titles
		higher_tier_than = BARON
		lower_tier_than = KING
		holder_scope = {	liege = { character = FROM }	}	
		OR = {
			holder_scope = { num_of_count_titles = 2 }
			AND = {
				tier = DUKE
				holder_scope = {
					NOR = {
						any_demesne_title = {
							tier = COUNT
							dejure_liege_title = { title = ROOT }
						}
						any_vassal = {
							any_demesne_title = {
								tier = COUNT
								dejure_liege_title = { title = ROOT }
							}
						}
					}
				}
			}
			AND = {
				holder_scope = { NOT = { tier = PREV } }					
				dejure_liege_title = { holder_scope = { character = FROM } }
			}
			AND = {
				FROM = { has_landed_title = e_iron_throne }
				holder_scope = {
					tier = KING
					NOT = { has_landed_title = k_crownlands }
				}
				location = {
					kingdom = { title = k_crownlands }
				}	
			}
		}
		NAND = {
			tier = COUNT
			location = { is_capital = yes }
		}
	}
	
	# Target scope
	allow = {
		OR = {
			# Count title outside a Duke's duchy
			custom_tooltip = {
				text = TOOLTIPplot_gain_vassal_titleCOUNTYA
				hidden_tooltip = {
					tier = COUNT
					holder_scope = {
						tier = DUKE
						num_of_count_titles = 2
						ROOT = { NOT = { de_jure_liege = PREV } }
					}
				}	
			}
			# Duke with no count titles
			custom_tooltip = {
				text = TOOLTIPplot_gain_vassal_titleDUKEA
				hidden_tooltip = {
					tier = DUKE
					holder_scope = {
						NOR = {
							any_demesne_title = {
								tier = COUNT
								dejure_liege_title = { title = ROOT }
							}
							any_vassal = {
								any_demesne_title = {
									tier = COUNT
									dejure_liege_title = { title = ROOT }
								}
							}
						}
					}
				}	
			}
			# Titles in ruler's dejure realm
			custom_tooltip = {
				text = TOOLTIPplot_gain_vassal_titleDEJURE
				hidden_tooltip = {
					holder_scope = { NOT = { tier = PREV } }					
					dejure_liege_title = { holder_scope = { character = FROM } }
				}
			}	
			# Count's secondary county
			custom_tooltip = {
				text = TOOLTIPplot_gain_vassal_titleCOUNTYB
				hidden_tooltip = {
					tier = COUNT
					holder_scope = { tier = COUNT }
				}
			}	
			# Crownland titles belong to iron throne
			custom_tooltip = {
				text = TOOLTIPplot_gain_vassal_titleCROWNLANDS
				hidden_tooltip = {
					FROM = { has_landed_title = e_iron_throne }
					holder_scope = {
						tier = KING
						NOT = { has_landed_title = k_crownlands }
					}
					location = {
						kingdom = { title = k_crownlands }
					}	
				}
			}	
		}
		is_primary_type_title = no
		controls_religion = no
		is_merchant_republic = no
		mercenary = no
		is_recent_grant = no
		holder_scope = { 
			war = no 
			NOT = { reverse_has_truce = FROM }
		}			
		# Just characters can only do this if they have a claim
		FROM = {
			OR = {
				NOT = { trait = just }
				has_strong_claim = PREV
				has_weak_claim = PREV
			}
		}		
		# Honorable chracters can only do this if they hate the target
		OR = {
			NOT = { FROM = { trait = honorable } }
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		}
	}
	
	chance = {
		factor = 2
		
		modifier = {
			factor = 0
			holder_scope = { reverse_opinion = { who = FROM value = 50 } }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}	
		modifier = {
			factor = 0.1
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					is_close_relative = PREV
					OR = {
						opinion = { who = PREV value = 15 }
						trait = familyperson
					}
					NOT = { trait = ruthless }
				}
			}	
		}
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.56
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.68
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2.32
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -99 } } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			holder_scope = { FROM = { is_foe = PREV } }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			holder_scope = { NOT = { religion = FROM } }
		}
		
		# # Ambition Effects
		# modifier = {
			# factor = 10
			# tier = COUNT
			# FROM = {
				# OR = {
					# has_ambition = obj_increase_demesne_1
					# has_ambition = obj_increase_demesne_2
					# has_ambition = obj_increase_demesne_3
					# has_ambition = obj_increase_demesne_4
					# has_ambition = obj_increase_demesne_5
				# }
			# }
		# }
	}
	
	success = {
		holder = FROM
	}
	abort = {
		OR = {
			FROM = {
				OR = {
					is_playable = no
					trait = incapable
					prisoner = yes
					has_character_flag = abort_plot
				}
			}
			NOR = {
				# Count title outside a Duke's duchy
				custom_tooltip = {
					text = TOOLTIPplot_gain_vassal_titleCOUNTYA
					hidden_tooltip = {
						tier = COUNT
						holder_scope = {
							tier = DUKE
							num_of_count_titles = 2
							ROOT = { NOT = { de_jure_liege = PREV } }
						}
					}	
				}
				# Duke with no count titles
				custom_tooltip = {
					text = TOOLTIPplot_gain_vassal_titleDUKEA
					hidden_tooltip = {
						tier = DUKE
						holder_scope = {
							NOR = {
								any_demesne_title = {
									tier = COUNT
									dejure_liege_title = { title = ROOT }
								}
								any_vassal = {
									any_demesne_title = {
										tier = COUNT
										dejure_liege_title = { title = ROOT }
									}
								}
							}
						}
					}	
				}
				# Titles in ruler's dejure realm
				custom_tooltip = {
					text = TOOLTIPplot_gain_vassal_titleDEJURE
					hidden_tooltip = {
						holder_scope = { NOT = { tier = PREV } }					
						dejure_liege_title = { holder_scope = { character = FROM } }
					}
				}	
				# Count's secondary county
				custom_tooltip = {
					text = TOOLTIPplot_gain_vassal_titleCOUNTYB
					hidden_tooltip = {
						tier = COUNT
						holder_scope = { tier = COUNT }
					}
				}	
				# Crownland titles belong to iron throne
				custom_tooltip = {
					text = TOOLTIPplot_gain_vassal_titleCROWNLANDS
					hidden_tooltip = {
						FROM = { has_landed_title = e_iron_throne }
						holder_scope = {
							tier = KING
							NOT = { has_landed_title = k_crownlands }
						}
						location = {
							kingdom = { title = k_crownlands }
						}	
					}
				}	
			}
			holder_scope = {
				NOT = { war_with = FROM }
				liege_before_war = {
					NOT = { character = FROM }
				}
			}		
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_gain_vassal_title_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
				set_character_flag = plot_cooldown
			}
		}
	}
	effect = {		
		FROM = {
			if = {
				limit = {
					NOT = { intrigue = 10 }
				}
				change_intrigue = 1
			}
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_gain_vassal_title_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
				set_character_flag = plot_cooldown
			}
		}
	}
}

# Take back crownlander bannermen
# plot_gain_crownlander_vassal = {
	# type = realm_characters_plus
	# military_plot = yes
	
	# # Plotter scope
	# potential = {
		# has_landed_title = e_iron_throne
		# prisoner = no
		# age = 16
		# NOT = { trait = incapable }
		# NOT = { trait = imbecile }
		# OR = {
			# ai = no
			# war = no
		# }
	# }
	
	# # Target scope
	# allow = {
		# is_ruler = yes
		# tier = KING
		# NOT = { has_landed_title = k_crownlands }
		# any_vassal = {
			# primary_title = {
				# OR = {
					# dejure_liege_title = { title = k_crownlands }
					# dejure_liege_title = { dejure_liege_title = { title = k_crownlands } }
				# }	
			# }
		# }		

		# # Just characters can only do this if they have a claim
		# FROM = {
			# OR = {
				# NOT = { trait = just }
				# has_strong_claim = PREV
				# has_weak_claim = PREV
			# }
		# }
		
		# # Honorable chracters can only do this if they hate the target
		# OR = {
			# NOT = { FROM = { trait = honorable } }
			# NOT = { reverse_opinion = { who = FROM value = -49 } } 
		# }
	# }
	
	# chance = {
		# factor = 1
		
		# modifier = {
			# factor = 0.0
			# FROM = {
				# ai = yes
				# war = yes
			# }
		# }
		# modifier = {
			# factor = 0.01
			# FROM = { trait = content }
		# }
		# modifier = {
			# factor = 0.2
			# FROM = { is_dumb_trigger = yes }
		# }
		# modifier = {
			# factor = 0.2
			# FROM = { trait = kind }
		# }
		# modifier = {
			# factor = 0.0
			# FROM = {
				# ai = yes
				# family = ROOT
				# opinion = { who = ROOT value = 25 }
			# }
		# }
		# modifier = {
			# factor = 0
			# FROM = {
				# ai = yes
				# opinion = { who = ROOT value = 80 }
			# }
			# NOT = {
				# OR = {
					# FROM = { trait = envious }
					# FROM = { trait = deceitful }
					# FROM = { trait = ambitious }
				# }
			# }
		# }
		# modifier = {
			# factor = 0.1
			# FROM = {
				# ai = yes
				# opinion = { who = ROOT value = 75 }
			# }
			# NOT = {
				# OR = {
					# FROM = { trait = envious }
					# FROM = { trait = deceitful }
					# FROM = { trait = ambitious }
				# }
			# }
		# }
		# modifier = {
			# factor = 0.25
			# FROM = {
				# ai = yes
				# opinion = { who = ROOT value = 50 }
			# }
			# NOT = {
				# OR = {
					# FROM = { trait = envious }
					# FROM = { trait = deceitful }
					# FROM = { trait = ambitious }
				# }
			# }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = {
				# ai = yes
				# opinion = { who = ROOT value = 25 }
			# }
			# NOT = {
				# OR = {
					# FROM = { trait = envious }
					# FROM = { trait = deceitful }
					# FROM = { trait = ambitious }
				# }
			# }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { FROM = { opinion = { who = ROOT value = 0 } } }
		# }
		# modifier = {
			# factor = 1.5
			# NOT = { FROM = { opinion = { who = ROOT value = -50 } } }
		# }
		# modifier = {
			# factor = 1.5
			# NOT = { FROM = { opinion = { who = ROOT value = -75 } } }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { is_smart_trigger = yes }
		# }
		# modifier = {
			# factor = 2.0
			# FROM = { trait = envious }
		# }
		# modifier = {
			# factor = 2.0
			# FROM = { trait = deceitful }
		# }
		# modifier = {
			# factor = 4.0
			# FROM = { trait = ambitious }
		# }
	# }
	
	# success = {
		# holder = FROM
	# }
	# abort = {
		# OR = {
			# FROM = { prisoner = yes }
			# FROM = { has_character_flag = abort_plot }
			# NOT = {
				# OR = {
					# # Count title outside a Duke's duchy
					# AND = {
						# tier = COUNT
						# holder_scope = {
							# tier = DUKE
							# ROOT = {
								# NOT = { de_jure_liege = PREV }
							# }
						# }
					# }
					# # Duke with no count titles
					# AND = {
						# tier = DUKE
						# holder_scope = {
							# NOT = {
								# any_demesne_title = {
									# tier = COUNT
									# location = {
										# duchy = {
											# title = ROOT
										# }
									# }
								# }
							# }
							# NOT = {
								# any_vassal = {
									# any_demesne_title = {
										# tier = COUNT
										# location = {
											# duchy = {
												# title = ROOT
											# }
										# }
									# }
								# }
							# }
						# }
					# }
					# # Count titles in ruler's primary duchy
					# AND = {
						# tier = COUNT
						# location = {
							# duchy = {
								# holder_scope = {
									# character = FROM
								# }
								# FROM = {
									# capital_scope = {
										# duchy = {
											# title = PREVPREVPREV
										# }
									# }
								# }
							# }
						# }
					# }
					# # Count's secondary county
					# AND = {
						# tier = COUNT
						# location = {
							# is_capital = no
						# }
						# holder_scope = {
							# lower_tier_than = DUKE
							# num_of_count_titles = 2
						# }
					# }
				# }
			# }
			# FROM = {
				# OR = {
					# is_playable = no
					# trait = incapable
				# }
			# }
			# holder_scope = {
				# liege_before_war = {
					# NOT = { character = FROM }
				# }
			# }
			
		# }
	# }
	# abort_effect = {
		# FROM = {
			# # Clear flags
			# hidden_tooltip = {
				# clr_character_flag = event7040
				# clr_character_flag = plot_gain_vassal_title_decision_taken
				# clr_character_flag = abort_plot
				# clr_character_flag = plot_check
				# set_character_flag = plot_cooldown
			# }
		# }
	# }
	# effect = {
		# FROM = {
			# change_intrigue = 1
			# any_plot_backer = {
				# reverse_opinion = {
					# modifier = opinion_grateful
					# who = FROM
					# years = 5
				# }
			# }
			# # Clear flags
			# hidden_tooltip = {
				# clr_character_flag = event7040
				# clr_character_flag = plot_gain_vassal_title_decision_taken
				# clr_character_flag = abort_plot
				# clr_character_flag = plot_check
				# set_character_flag = plot_cooldown
			# }
		# }
	# }
# }

plot_kill_character = {
	type = realm_characters_plus # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		age = 14
		NOT = { trait = incapable }
		NAND = {
			ai = yes
			OR = {
				trait = honest
				trait = kind
				trait = honorable
				AND = {
					OR = {
						trait = kingsguard
						trait = nightswatch
					}
					NOT = { trait = ruthless }
				}	
			}	
		}
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = dragon }
		NOT = { trait = wikid }
		hidden_tooltip = {
			OR = { #is capable plotter
				is_ruler = yes
				intrigue = 10
				is_councillor = yes
				liege = { is_close_relative = PREV }
			}
			OR = {
				ai = no # Human	
				higher_tier_than = BARON #Ruler
				is_patrician = yes
				
				# Is nuts...
				trait = lunatic
				trait = possessed	
				
				OR = {	# Is willing or eager to kill		
					trait = ambitious
					trait = envious
					trait = ruthless
					trait = cruel
				}

				# Pretender to a title
				any_pretender_title = { higher_tier_than = BARON }	
				# Heir to a title
				any_heir_title = { higher_tier_than = BARON }	
				# Character's child is heir or pretender to a title that I don't hold
				any_child = {
					OR = {
						any_pretender_title = {
							NOT = { holder_scope = { character = ROOT } }
							NOT = { current_heir = { character = ROOT } }
						}
						any_heir_title = {
							NOT = { holder_scope = { character = ROOT } }
						}
					}
				}
				# Spouse is pretender to a title, or has a lover
				any_spouse = {
					OR = {
						any_pretender_title = {
							NOT = { holder_scope = { character = ROOT } }
							NOT = { current_heir = { character = ROOT } }
						}
						any_heir_title = {
							NOT = { holder_scope = { character = ROOT } }
						}
						any_lover = { NOT = { character = ROOT } }
					}	
				}			
			}
		}
	}
	
	target_potential = {
		NOT = { is_married = FROM } # This case is covered by another plot
		NOT_mythical_creature_trigger = yes
	}
	
	# Target allow trigger for when players target a specific character in the GUI	
	player_allow = {
		NOT = { is_child_of = FROM } # Not my own children
		is_within_diplo_range = FROM		
		NOT = { has_blood_oath_with = FROM }
	}
	
	# Target character scope
	allow = {
		NOT = { is_child_of = FROM } # Not my own children
		NOT = { father_even_if_dead = { is_child_of = FROM } }
		NOT = { mother_even_if_dead = { is_child_of = FROM } }
		is_within_diplo_range = FROM
		NOT = { has_blood_oath_with = FROM }				
		NOT = { is_lover = FROM }		
		NOT = { is_friend = FROM }
		hidden_tooltip = {
			FROM = {
				OR = {
					# Rivals
					is_foe = ROOT	
									
					# Kill a kinslayer if im kin
					AND = {
						NOT = { dynasty = 0 }
						dynasty = ROOT
						ROOT = { trait = kinslayer }
					}
					
					# A lover of spouse...
					AND = {
						OR = {
							ai = no
							trait = envious
							trait = proud
							trait = just
							NOT = { opinion = { who = ROOT value = 0 } }
						}
						any_spouse = { is_lover = ROOT }				
					}
					
					#Same liege...
					AND = {
						same_liege = ROOT
						OR = {
							AND = { # Heathen advisers to liege
								NOT = { religion_group = ROOT }
								ROOT = { 
									OR = {
										is_councillor = yes 
										is_voter = yes
									}	
								}
								trait = zealous
							}
							# Go nuts...
							trait = lunatic
							trait = possessed
						}					
					}	
					
					# Liege...
					AND = {
						liege = { character = ROOT }
						OR = {
							AND = { #Heathen
								NOT = { religion_group = ROOT }
								NOT = { trait = cynical }
								OR = {
									trait = zealous
									has_landed_title = k_the_most_devout
									has_opinion_modifier = { who = ROOT modifier = opinion_religion_threatened }
								}							
							}
							ROOT = { #Tyrant
								check_variable = { which = "tyrant" value = 14.9 }
								NOT = { trait = tyrannical_stain }
							}
						}	
					}
										
					# Threats and enemies
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_claimant_adventure_target }
					AND = {
						is_ruler = yes
						war_with = ROOT			
						OR = {
							is_primary_war_attacker = yes
							is_primary_war_defender = yes
							liege = { character = PREV }
						}
						ROOT = {
							is_adult = yes
							NOT = { trait = incapable }
							OR = {
								is_primary_war_attacker = yes
								is_primary_war_defender = yes
							}
						}
					}

					# Night's Watch broke vows
					AND = {
						trait = nightswatch
						ROOT = {
							OR = {
								has_landed_title = k_nightswatch
								has_character_modifier = NW_broken_vows
							}
						}
					}
					
					# Titles/Family concerns
					AND = {
						OR = {
							ai = no
							trait = envious
							trait = ambitious
							trait = greedy
							trait = selfish
							trait = proud
							AND = {
								trait = familyperson
								NOT = { is_close_relative = ROOT }
							}
							NOT = { opinion = { who = ROOT value = 0 } }
						}
						OR = {
							AND = {
								OR = {
									any_pretender_title = { # Get rid of the current ruler or heir if I'm a pretender
										OR = {
											current_heir = { character = ROOT }
											holder_scope = { character = ROOT }
										}
									}
									any_heir_title = { # Kill a ruler if I'm the heir
										holder_scope = { character = ROOT }
										NOT = { has_law = succ_appointment }
									}
								}							
								OR = {
									NOT = { trait = just }
									OR = {
										has_opinion_modifier = { who = ROOT modifier = opinion_usurped_title }
										any_pretender_title = {
											current_heir = { character = ROOT }
											holder_scope = { reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } }
										}
									}	
								}
							}
							any_child = { # Gets rid of obstacles in the way of a child's succession
								OR = {
									any_pretender_title = {
										current_heir = { character = ROOT }
									}
									any_heir_title = {
										holder_scope = { character = ROOT }
									}
								}
								OR = {
									PREV = { NOT = { trait = just } }
									any_pretender_title = {
										current_heir = { character = ROOT }
										holder_scope = { reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } }
									}
									has_opinion_modifier = { who = ROOT modifier = opinion_usurped_title }
								}
							}
							any_spouse = {	# Gets rid of obstacles in the way of a spouse's succession
								OR = {
									any_pretender_title = { # Get rid of the current heir to a title the character's spouse is a pretender to
										current_heir = { character = ROOT }
									}
									any_heir_title = { # Get rid of a ruler the spouse is heir to
										holder_scope = { character = ROOT }
									}
								}	
								OR = {
									PREV = { NOT = { trait = just } }
									any_pretender_title = {
										current_heir = { character = ROOT }
										holder_scope = { reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } }
									}
									has_opinion_modifier = { who = ROOT modifier = opinion_usurped_title }
								}
							}
							ROOT = { #Is married/betrothed to me/relative and is a douche
								is_ruler = yes
								is_female = no
								OR = {
									any_spouse = {
										OR = {
											character = FROM
											is_close_relative = FROM
										}
										NOT = { opinion = { who = PREV value = 0 } }
									}
									betrothed = {
										OR = {
											character = FROM
											is_close_relative = FROM
										}
										NOT = { opinion = { who = PREV value = 0 } }
									}
								}
								NOT = { reverse_opinion = { who = PREV value = 0 } }
								OR = {
									trait = cruel
									trait = lunatic
									trait = impaler
									trait = arbitrary
								}
							}
						}	
					}
								
					AND = { #These motives are invalid for just characters
						NOT = { trait = just }
						OR = {
							ai = no
							trait = ruthless
							trait = ambitious
							trait = proud
							trait = greedy
							trait = envious
							trait = selfish
							trait = arbitrary
						}
						OR = {
							# Claimant, kill competent holder				
							ROOT = {
								is_ruler = yes
								any_demesne_title = { 
									FROM = { has_claim = PREV }
								}
								NOT = { trait = incapable }
								age = 16
								NOT = { trait = bastard }
								NOT = { trait = lunatic }
								NOT = { check_variable = { which = "tyrant" value = 9.9 } }
								martial = 8
								stewardship = 8
								diplomacy = 8
								intrigue = 8
								NOT = { has_character_modifier = suspected_bastard }								
							}						
							# Councillors whose jobs I want
							AND = {
								same_liege = ROOT
								OR = {
									AND = {
										ROOT = { has_job_title = job_castellan }
										has_ambition = obj_become_castellan
									}
									AND = {
										ROOT = { has_job_title = job_chancellor }
										has_ambition = obj_become_chancellor
									}
									AND = {
										ROOT = { has_job_title = job_marshal }
										has_ambition = obj_become_marshal
									}
									AND = {
										ROOT = { has_job_title = job_treasurer }
										has_ambition = obj_become_treasurer
									}
									AND = {
										ROOT = { has_job_title = job_spymaster }
										has_ambition = obj_become_spymaster
									}
								}										
							}
							# I want to be regent
							AND = {
								has_ambition = obj_become_regent
								has_minor_title = title_appointed_regent
								ROOT = { 
									is_liege_of = PREV
									current_heir = {
										OR = {
											trait = incapable
											NOT = { age = 16 }
										}
									}
								}
							}
							# Powerful and ambitious pretenders
							ROOT = {
								OR = {
									any_pretender_title = {
										OR = {
											holder_scope = { character = FROM }
											current_heir = { character = FROM }
										}
									}
									any_claim = {
										OR = {
											holder_scope = { character = FROM }
											current_heir = { character = FROM }
										}
									}
								}	
								# Must actually be a threat, at least in theory
								is_adult = yes
								NOT = { trait = incapable }
								OR = {
									intrigue = 14
									martial = 14
									trait = dragon_rider
									AND = {
										liege = { character = FROM }
										relative_power_to_liege = 0.25
									}
								}
								OR = {
									trait = ambitious
									trait = proud
									trait = envious
									trait = ruthless
								}
							}
						}
					}					
				}
			}
		}	
	}
	
	chance = {
		factor = 1
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		
		modifier = {
			factor = 0.01			
			# Kinslaying is generally discouraged
			FROM = {
				OR = {
					AND = {
						NOT = { dynasty = 0 }
						dynasty = ROOT
					}	
					is_close_relative = ROOT
				}	
				NOT = { trait = arbitrary }
				NOT = { trait = ruthless }
				NOT = { trait = cruel }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
		}
		modifier = { #non trusting kin will really try to kill kinslayers
			factor = 10
			FROM = { 
				NOT = { dynasty = 0 }
				dynasty = root 
				NOT = { trait = trusting }
			}
			trait = kinslayer
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = cruel }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 4
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
		
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			is_vassal_or_below = FROM
			has_character_modifier = feared_1
		}
		modifier = {
			factor = 0.5
			is_vassal_or_below = FROM
			has_character_modifier = feared_2
		}
		modifier = {
			factor = 0.3
			is_vassal_or_below = FROM
			has_character_modifier = feared_3
		}
		modifier = {
			factor = 0.2
			is_vassal_or_below = FROM
			has_character_modifier = feared_4
		}
		modifier = {
			factor = 0.1
			is_vassal_or_below = FROM
			has_character_modifier = feared_5
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
		
		# People with ambitions should always target the natural obstacles to those ambitions
		modifier = {
			factor = 10
			same_liege = FROM
			OR = {
				is_councillor = yes
				is_voter = yes
			}	
			OR = {
				AND = {
					has_job_title = job_castellan				
					FROM = { has_ambition = obj_become_castellan }
				}
				AND = {
					has_job_title = job_chancellor
					FROM = { has_ambition = obj_become_chancellor }
				}
				AND = {
					has_job_title = job_marshal
					FROM = { has_ambition = obj_become_marshal }
				}
				AND = {
					has_job_title = job_treasurer
					FROM = { has_ambition = obj_become_treasurer }
				}
				AND = {
					has_job_title = job_spymaster
					FROM = { has_ambition = obj_become_spymaster }
				}
				AND = {
					is_voter = yes
					NOR = {
						has_job_title = job_castellan
						has_job_title = job_chancellor
						has_job_title = job_treasurer
						has_job_title = job_marshal
						has_job_title = job_spymaster
						has_job_title = job_spiritual
						has_job_title = job_priest
					}	
					FROM = { has_ambition = obj_become_councillor }
				}
			}	
		}
		modifier = {
			factor = 10
			FROM = {
				has_ambition = obj_become_heir
				any_pretender_title = { 
					OR = {
						current_heir = { character = ROOT }
						holder_scope = { character = ROOT }
					}
				}			
			}
		}
		modifier = {
			factor = 10
			FROM = {
				has_ambition = obj_become_king
				OR = {
					any_pretender_title = {
						tier = EMPEROR
						OR = {
							current_heir = { character = ROOT }
							holder_scope = { character = ROOT }
						}
					}
					any_heir_title = {
						tier = EMPEROR
						holder_scope = { character = ROOT }
					}
					ROOT = {
						is_ruler = yes
						any_demesne_title = { 
							tier = EMPEROR
							FROM = { has_claim = PREV }
						}
						NOT = { trait = incapable }
						age = 16
						NOT = { trait = bastard }
						NOT = { trait = lunatic }
						NOT = { check_variable = { which = "tyrant" value = 9.9 } }
						martial = 8
						stewardship = 8
						diplomacy = 8
						intrigue = 8
						NOT = { has_character_modifier = suspected_bastard }
					}
				}
			}
		}
		modifier = {
			factor = 10
			FROM = {
				has_ambition = obj_become_lord_paramount
				OR = {
					any_pretender_title = {
						higher_tier_than = PREV
						OR = {
							current_heir = { character = ROOT }
							holder_scope = { character = ROOT }
						}
					}
					any_heir_title = {
						higher_tier_than = PREV
						holder_scope = { character = ROOT }
					}
					ROOT = {
						is_ruler = yes
						any_demesne_title = { 
							higher_tier_than = PREVPREV
							FROM = { has_claim = PREV }
						}
						NOT = { trait = incapable }
						age = 16
						NOT = { trait = bastard }
						NOT = { trait = lunatic }
						NOT = { check_variable = { which = "tyrant" value = 9.9 } }
						martial = 8
						stewardship = 8
						diplomacy = 8
						intrigue = 8
						NOT = { has_character_modifier = suspected_bastard }
					}
				}
			}
		}
		modifier = {
			factor = 10
			FROM = {
				has_ambition = obj_wants_landed_title
				OR = {
					any_pretender_title = {
						OR = {
							current_heir = { character = ROOT }
							holder_scope = { character = ROOT }
						}
					}
					any_heir_title = { holder_scope = { character = ROOT } }
				}
			}
		}
		modifier = {
			factor = 10
			FROM = { has_ambition = obj_bloodline_iron_throne }
			e_iron_throne = {
				OR = {
					current_heir = { character = ROOT }
					holder_scope = { character = ROOT }
				}
			}
			FROM = {
				OR = {
					any_pretender_title = { title = e_iron_throne }
					any_spouse = {
						any_pretender_title = { title = e_iron_throne }
					}
					any_dynasty_member = {
						any_pretender_title = { title = e_iron_throne }
					}
					e_iron_throne = {					
						holder_scope = { character = ROOT }
						current_heir = {
							OR = {
								character = PREVPREV
								is_married = PREVPREV
								dynasty = PREVPREV
							}
						}	
					}
				}
			}
		}
		
		modifier = {
			factor = 10		
			FROM = { trait = nightswatch }
			OR = {
				has_landed_title = k_nightswatch
				has_character_modifier = NW_broken_vows
			}
		}	
	}
	
	success = {
		is_alive = no
		hidden_tooltip = {
			FROM = { has_character_flag = murder_in_motion }
		}
	}
	abort = {
		OR = {
			FROM = { has_character_flag = abort_plot }
			is_alive = no
		}	
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = murder_in_motion 
			clr_character_flag = no_rhollor_magic
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
		
	}
	effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = murder_in_motion
				clr_character_flag = no_rhollor_magic
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
				any_plot_backer = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}
		}
	}
}
# Get a spouse killed
plot_kill_spouse = {
	type = spouse
	intrigue_plot = yes
	murder_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		age = 14
		is_married = yes
		NOT = { trait = incapable }
		NAND = {
			ai = yes
			OR = {
				trait = honest
				trait = kind
				trait = honorable
			}	
		}
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = wikid }
	}
	
	target_potential = {
		NOT = { culture_group = unoccupied_group }
	}
	
	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		always = yes
	}
	
	# Target character scope
	allow = {
		NOT = { is_lover = FROM }
		NOT = { is_friend = FROM }
		hidden_tooltip = {
			FROM = {
				OR = {
					# Human
					ai = no
					
					# Rivals
					is_foe = ROOT
									
					# Motives for certain personalities
					AND = {
						NOT = { trait = just }
						OR = {
							trait = ruthless
							trait = arbitrary
							trait = ambitious
							trait = proud
							trait = wroth
							trait = cruel
						}
						OR = { 
							NOT = { opinion = { who = ROOT value = -75 } }
							# Male plotter without sons wanting to kill an old/barren wife
							AND = { 
								ROOT = { age = 40 }
								is_female = no
								OR = {
									is_ruler = yes
									is_primary_heir = yes
								}
								# No sons
								NOT = {
									any_child = {
										is_alive = yes
										is_female = no
									}
								}
								NOT = { opinion = { who = ROOT value = 50 } }
							}
							# Female plotter disliking her husband but loving her child - the legal heir
							AND = {
								is_female = yes
								num_of_children = 1
								NOT = { opinion = { who = ROOT value = -25 } }	
								any_child = {
									is_alive = yes
									any_heir_title = { holder_scope = { character = ROOT } }
									reverse_opinion = { who = PREV value = 0 }
								}
							}
							# Spouse has a lover...
							ROOT = {
								any_lover = { NOT = { character = FROM } }
							}
						}	
					}

					# Insane plotter...
					trait = lunatic 
					trait = possessed
				}
			}	
		}	
	}
	
	chance = {
		factor = 1
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		
		modifier = {
			factor = 0.01			
			# Kinslaying is generally discouraged
			FROM = {
				OR = {
					AND = {
						NOT = { dynasty = 0 }
						dynasty = ROOT
					}	
					is_close_relative = ROOT
				}	
				NOT = { trait = arbitrary }
				NOT = { trait = ruthless }
				NOT = { trait = cruel }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
		}
		modifier = { #non trusting kin will really try to kill kinslayers
			factor = 10
			FROM = { 
				NOT = { dynasty = 0 }
				dynasty = root 
				NOT = { trait = trusting }
			}
			trait = kinslayer
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = cruel }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
		
		modifier = {
			factor = 2.0
			age = 40
			FROM = {
				is_female = no
				NOT = {
					any_child = {
						is_alive = yes
						is_female = no
					}
				}
			}
		}
		# Rulers with ambitions to have children are more likely to kill infertile spouses
		modifier = {
			factor = 5
			FROM = {
				OR = {
					has_character_flag = obj_have_a_son
					has_character_flag = obj_have_a_daughter
					has_character_flag = obj_have_five_children
				}	
			}
			OR = {
				AND = {
					age = 45
					is_female = yes
				}
				trait = homosexual
				NOT = { fertility = 0.05 }
			}
		}
	}
	
	success = {
		is_alive = no
		hidden_tooltip = {
			FROM = { has_character_flag = murder_in_motion }
		}
	}
	abort = {
		OR = {
			is_alive = no
			FROM = { has_character_flag = abort_plot }
		}	
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = murder_in_motion 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
	}
	effect = {
		FROM = {
			clr_character_flag = murder_in_motion
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			# Achievement
			hidden_tooltip = {
				if = {
					limit = {
						ai = no
					}
					set_character_flag = achievement_spouse_killer
				}
				add_character_modifier = {
					name = "killed_spouse"
					duration = 20
				}
				any_plot_backer = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}
		}
	}
}

# Cut down a fellow vassal to size
plot_weaken_fellow_vassal = {
	type = realm_titles
	military_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		is_patrician = no
		liege = { 
			is_merchant_republic = no
			is_patrician = no
		}
		age = 16
		is_ruler = yes
		independent = no
		is_landed = yes
		
		higher_tier_than = BARON
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
		NOT = { trait = just }
		OR = {
			ai = no
			war = no
		}
		# # These would cause all kinds of problems
		can_press_claims_trigger = yes
		NOT = { culture_group = unoccupied_group }
	}
	
	target_potential = {
		higher_tier_than = COUNT
		holder_scope = {
			independent = no
			held_title_rating = FROM
			same_liege = FROM	
			NOT = { character = FROM }
			any_demesne_title = {
				tier = ROOT
				is_primary_holder_title = no
			}
			any_vassal = {
				tier = COUNT
				any_demesne_title = {
					tier = COUNT
					dejure_liege_title = {
						title = ROOT
					}
				}
			}	
			NOT = { culture_group = unoccupied_group }
		}
		OR = {  #Cannot target primary 'duchy' (AGOT)
			tier = KING
			NOT = {
				holder_scope = {
					any_demesne_title = {
						tier = count
						location = { is_capital = yes }
						de_jure_liege_or_above = ROOT
					}
				}
			}
		}
	}
	
	# Occurs when plot is activated
	# creation_effect = { #Doesnt work, silly paradox
		# ROOT = {
			# holder_scope = {
				# opinion = {
					# modifier = opinion_weaken_fellow_vassal_target
					# who = FROM
				# }
			# }
		# }
	# }
	
	# Target scope
	allow = {	
		is_primary_holder_title = no		
		current_heir = {
			NOT = { character = FROM }
		}
		holder_scope = {	
			NOR = {
				reverse_has_truce = FROM
				spouse = { character = FROM }			
				overlord_of = FROM
			}			
			#Realistic Geographic restrcition (AGOT)
			FROM = {
				OR = {
					custom_tooltip = { #LPs with at least one county can use this against anyone
						text = TOOLTIPplot_weaken_fellow_vassalKING
						hidden_tooltip = {
							tier = KING 
							any_demesne_title = { tier = COUNT } 
						}	
					}	
					#Or of an equal or higher rank than target
					NOT = { lower_tier_than = PREV }
					custom_tooltip = { #Or same dejure 'Kingdom'
						text = TOOLTIPplot_weaken_fellow_vassalCAPITAL
						hidden_tooltip = {
							capital_scope = { 
								kingdom = {
									de_jure_vassal_or_below = ROOT
								}
							}
						}	
					}	
				}
			}	
		}
		FROM = {
			custom_tooltip = { #LPs with at least one county can use this against anyone
				text = TOOLTIPplot_weaken_fellow_vassalCROWNLAW
				hidden_tooltip = {
					OR = {
						crownlaw_title = {
							NOR = {
								has_law = centralization_3
								has_law = centralization_4
							}
						}
						NOT = {
							crownlaw_title = {
								always = yes
							}
						}
					}
				}	
			}	
		}
		# Honorable characters will only do this to people they hate
		OR = {
			NOT = { FROM = { trait = honorable } }
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		}
	}
	
	
	chance = {
		factor = 2
		
		modifier = {
			factor = 0
			holder_scope = { reverse_opinion = { who = FROM value = 50 } }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}	
		modifier = {
			factor = 0.1
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					is_close_relative = PREV
					OR = {
						opinion = { who = PREV value = 15 }
						trait = familyperson
					}
					NOT = { trait = ruthless }
				}
			}	
		}
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.56
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.68
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2.32
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -99 } } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			holder_scope = { FROM = { is_foe = PREV } }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			holder_scope = { NOT = { religion = FROM } }
		}
	}
	
	success = {
		hidden_tooltip = {
			# holder_scope = {
				# NOT = { 
					# has_opinion_modifier = {
						# modifier = opinion_plot_weaken_fellow_vassal
						# who = FROM			
					# }
				# }
			# }
			FROM = {
				has_character_flag = weakened_fellow_vassal
			}
		}
		custom_tooltip = { text = PLOT_TOOLTIP_WEAKEN_VASSAL }
	}
	abort = {
		OR = {
			is_primary_holder_title = yes
			holder_scope = {
				OR = {
					spouse = { character = FROM }
					NOT = { higher_tier_than = COUNT }
					independent = yes
					NOT = { same_liege = FROM }
				}	
			}
			FROM = {
				OR = {
					is_ruler = no
					independent = yes
					trait = incapable
				}
			}
			AND = { #War has stopped
				FROM = { has_character_flag = weaken_vassal_plot_war_started }
				NOT = { holder_scope = { war_with = FROM } }
			}
			FROM = { has_character_flag = abort_plot }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_weaken_fellow_vassal_decision_liege_taken
				clr_character_flag = plot_weaken_fellow_vassal_decision_taken
				clr_character_flag = weaken_vassal_plot_war_started
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
	effect = {
		FROM = {
			if = {
				limit = {
					NOT = { intrigue = 10 }
				}
				change_intrigue = 1
			}
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_weaken_fellow_vassal_decision_liege_taken
				clr_character_flag = plot_weaken_fellow_vassal_decision_taken
				clr_character_flag = weaken_vassal_plot_war_started
				clr_character_flag = weakened_fellow_vassal
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
}
#WOLFGANG PAULI - Rescue Prisoner Plot
plot_rescue_prisoner = {
	type = realm_characters_plus
	intrigue_plot = yes
	
	potential = {
		OR = {
			higher_tier_than = BARON
			intrigue = 10
		}
		prisoner = no
		age = 15		
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = dragon }
		NOT = { trait = slave }
		NOT = { trait = salt_wife }	
		NOT = { trait = wikid }		
	}
	
	target_potential = {
		OR = {
			prisoner = yes
			AND = {
				trait = salt_wife
				host = {
					religion_group = drowned_god_group
					culture = ironborn
				}
			}
			AND = {
				trait = slave
				liege = { has_opinion_modifier = { who = PREV modifier = opinion_my_slave } }
			}
			AND = {
				is_consort = yes
				liege = { reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_consort } }
			}
		}
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = dragon }
		NOT = { host = { character = FROM } }
		OR = { #Can't target own slaves. concubines
			NOT = { liege = { character = FROM } }
			NOT = { 
				OR = {
					trait = salt_wife
					trait = slave
					AND = {
						is_consort = yes
						has_opinion_modifier = { who = FROM modifier = opinion_forced_consort }
					}
				}
			}
		}
	}
	
	player_allow = {
		is_within_diplo_range = FROM
	}
	
	allow = { #target character scope	
		is_within_diplo_range = FROM
		OR = {
			#FROM = { character = ROOT } #EXPERIMENTAL. this MIGHT allow prisoners to plot to free themselves
			AND = {
				NOT = { dynasty = 0 }
				dynasty = FROM #is dynasty member
			}
			liege = { character = FROM } #is vassal
			is_liege_of = FROM #is liege lord
			is_married = FROM #is spouse
			is_close_relative = FROM #is close relative (duh)
			is_friend = FROM #is a friend
			FROM = { any_spouse = { is_close_relative = ROOT } } #in-laws
			reverse_has_opinion_modifier = { who = FROM modifier = opinion_my_abducted_spouse } #Spouse that was taken as a concubine
		}
		# host = { #Until stealth break event is ready can only plot if can delcare war against captor
			# OR = {
				# liege = { character = FROM }
				# any_vassal = { character = FROM }
				# same_liege = FROM
				# AND = {
					# independent = yes
					# NOT = { same_realm = FROM }
				# }	
			# }
		# }
		OR = {
			FROM = { NOT = { trait = just } }
			# Just characters won't plot to free people who've been justly imprisoned
			host = {
				OR = {
					ROOT = { just_execution_reason_PREV_trigger = yes }
					has_opinion_modifier = { who = ROOT modifier = opinion_dishonorable }
					has_opinion_modifier = { who = ROOT modifier = scheming_bastard }
				}	
			}
		}
	}
	
	chance = { #AI modifiers here, FROM is plotter scope
		factor = 10
		
		modifier = {
			factor = 5
			FROM = { trait = honorable }
		}		
		modifier = {
			factor = 5
			FROM = { trait = just }
		}
		
		modifier = {
			factor = 1.5
			FROM = { opinion = { who = ROOT value = 90 } }
		}
		modifier = {
			factor = 1.5
			FROM = { opinion = { who = ROOT value = 65 } }
		}
		modifier = {
			factor = 1.5
			FROM = { opinion = { who = ROOT value = 40 } }
		}
		modifier = {
			factor = 1.5
			FROM = { opinion = { who = ROOT value = 15 } }
		}
		
		modifier = {
			factor = 0.67
			NOT = { FROM = { opinion = { who = ROOT value = -15 } } }
		}
		modifier = {
			factor = 0.67
			NOT = { FROM = { opinion = { who = ROOT value = -40 } } }
		}
		modifier = {
			factor = 0.5
			NOT = { FROM = { opinion = { who = ROOT value = -65 } } }
		}
		modifier = {
			factor = 0.33
			NOT = { FROM = { opinion = { who = ROOT value = -90 } } }
		}
		
		
		
		#priorities: child, spouse, father-mother-sibling, close family, friend, dynasty, in-laws, liege lord, vassals
		modifier = { #parent, child or spouse
			factor = 2.5
			OR = {
				any_child = { character = FROM }
				father = { character = FROM }
				mother = { character = FROM }
				is_married = FROM
			}
		}
		
		modifier = { #close family or friend
			factor = 4	
			OR = {
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_my_abducted_spouse }
				is_friend = FROM
				is_close_relative = FROM
			}
		}
		
		modifier = { #dynasty or in-laws
			factor = 1.5
			OR = {
				dynasty = FROM #same dynasty
				FROM = {
					any_spouse = {
						is_close_relative = ROOT
					}
				}
			}
		}
		
		modifier = {
			factor = 0.05
			is_liege_of = FROM
			FROM = { 
				liege = { regent = { character = PREVPREV } }
				OR = {
					trait = ruthless
					trait = ambitious
					trait = greedy
				}
			}
		}
		modifier = {
			factor = 10
			FROM = { trait = familyperson }
			OR = {
				dynasty = FROM
				is_close_relative = FROM
				is_married = FROM
			}
		}			
		modifier = {
			factor = 0.75
			OR = {
				FROM = { trait = stressed }
				FROM = { trait = depressed }
			}
		}		
		modifier = {
			factor = 5
			OR = {
				FROM = { trait = lunatic }
				FROM = { trait = possessed }
			}
		}
		modifier = {
			factor = 1.5
			FROM = { trait = diligent }
		}	
		modifier = {
			factor = 0.66
			FROM = { trait = slothful }
		}		
		modifier = {
			factor = 2
			FROM = { trait = wroth }
		}	
		modifier = {
			factor = 0.5
			FROM = {
				OR = {
					trait = patient
					trait = humble
					trait = content
				}
			}
		}	
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}	
		modifier = {
			factor = 2.0
			FROM = { trait = brave }
		}	
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}		
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}			
		modifier = { #drinking buddies will stick together through the thick of it
			factor = 1000
			FROM = { trait = drunkard }
			trait = drunkard
			opinion = { who = FROM value = 75 }
		}
		
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			host = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_1
			}	
		}
		modifier = {
			factor = 0.5
			host = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_2
			}
		}
		modifier = {
			factor = 0.3
			host = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_3
			}
		}
		modifier = {
			factor = 0.2
			host = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_4
			}
		}
		modifier = {
			factor = 0.1
			host = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_5
			}
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			host = {
				is_vassal_or_below = FROM
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5 
				}	
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			host = {
				is_vassal_or_below = FROM
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5 
				}	
			}	
		}
	}
	
	success = { #FROM is plotter scope
		prisoner = no
		NOT = { trait = salt_wife }
		NOT = { trait = slave }
		is_alive = yes
		has_character_flag = rescued_prisoner
	}
	
	abort = {
		OR = {
			FROM = {
				NOT = { has_character_flag = launched_rescue_war }
				OR = {
					has_character_flag = abort_plot
					prisoner = yes
					trait = incapable
				}
			}	
			is_alive = no
			AND = {
				prisoner = no
				NOT = { trait = salt_wife }
				NOT = { trait = slave }
				NOT = { has_character_flag = rescued_prisoner }
				is_consort = no
			}	
		}
	}
	
	abort_effect = { #FROM is plotter scope
		clr_character_flag = prisoner_rescue_target
		clr_character_flag = rescued_prisoner
		FROM = { 
			clr_character_flag = launched_rescue_war
			clr_character_flag = plot_rescue_war_demand_issued
			#character_event = { id = rescue_prisoner.1 }
			# any_war = { #this ends the war inconclusively.
				# limit = { using_cb = rescue_prisoner }
				# end_war = invalid
			# }
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
	}
	
	effect = {
		clr_character_flag = prisoner_rescue_target
		clr_character_flag = rescued_prisoner
		FROM = {
			prestige = 75
			any_plot_backer = {
				prestige = 50
				#reverse_opinion = {
				#	modifier = opinion_grateful
				#	who = FROM
				#	years = 5
				#}
				if = { #Opinion for services
					limit = {
						liege = { character = PREVPREV }
					}
					reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
					change_variable = { which = "services_rendered" value = 0.5 }					
				}
			}
			clr_character_flag = launched_rescue_war
			clr_character_flag = plot_rescue_war_demand_issued
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
	}
}
#IBuy loyalty of council member
plot_buy_loyalty = {
	type = realm_characters_plus
	intrigue_plot = yes
	
	potential = {
		prisoner = no
		age = 16
		is_ruler = yes
		demesne_size = 1
		OR = {
			intrigue = 10
			has_job_title = job_spymaster
			trait = elephant
			trait = tiger
		}
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
		NOT = { trait = honest }
		NOT = { trait = honorable }
		NOT = { trait = kingsguard }
		NOT = { trait = nightswatch }
		NOT = { trait = archmaester }
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		NOT = { liege = { character = FROM } } 	#is not liege of target
		OR = {
			AND = {
				is_councillor = yes
				NOT = { liege = { is_friend = ROOT } }
				OR = {
					same_liege = FROM #liege is plotter's liege 
					liege = { #liege shares same liege and tier as plotter
						same_liege = FROM 
						tier = FROM
						OR = { 
							NOT = { has_landed_title = k_the_most_devout } #Most devout must have a count title to be targeted
							any_demesne_title = { tier = COUNT }
						}	
					} 
					AND = { #Kings can target LPs
						FROM = { tier = EMPEROR }
						liege = { 
							tier = KING
							liege = { character = FROM } 
							OR = { 
								NOT = { has_landed_title = k_the_most_devout } #Most devout must have a count title to be targeted
								any_demesne_title = { tier = COUNT }
							}	
						}
					}
				}
			}	
			AND = { #Buy Freeholder vote in Triarchy
				FROM = { 
					OR = {
						trait = elephant
						trait = tiger
					}	
				}
				OR = {
					trait = elephant
					trait = tiger
				}	
				is_patrician = no
				NOT = { has_character_flag = triarch }	
			}
		}	
		NOT = { culture_group = unoccupied_group }
	}
	
	player_allow = { #target character scope		
		NOT = { trait = honest }
		NOT = { trait = just }
		NOT = { trait = honorable }
		NOT = { trait = content }
		NOT = { trait = incapable }
		prisoner = no
		opinion = { who = FROM value = -15 }
		NOT = { opinion = { who = liege value = 45 } }
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_bribe_rejected } }
		OR = {
			NOT = { liege = { dynasty = ROOT } }
			dynasty = FROM
		}	
		NOT = { liege = { spouse = { character = ROOT } } }
		NOT = { liege = { is_close_relative = ROOT } }
		NOT = { 
			AND = { #landed councillors have extra restrictions
				is_ruler = yes
				OR = {
					trait = proud
					NOT = { lower_tier_than = FROM }
					prestige = 250
				}
			}	
		}
		custom_tooltip = {
			text = TOOLTIPplot_buy_loyaltyBOUGHT
			hidden_tooltip = { NOT = { has_character_flag = loyalty_bought } }
		}	
	}
	
	allow = { #target character scope
		# Players will only see their own liege's councillors in this menu
		OR = {
			same_liege = FROM
			FROM = { ai = yes }
		}	
		NOT = { trait = honest }
		NOT = { trait = just }
		NOT = { trait = honorable }
		NOT = { trait = content }
		NOT = { trait = incapable }
		prisoner = no
		opinion = { who = FROM value = -15 }
		NOT = { opinion = { who = liege value = 45 } }
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_bribe_rejected } }
		OR = {
			NOT = { liege = { dynasty = ROOT } }
			dynasty = FROM
		}	
		NOT = { liege = { spouse = { character = ROOT } } }
		NOT = { liege = { is_close_relative = ROOT } }
		NOT = { 
			AND = { #landed councillors have extra restrictions
				is_ruler = yes
				OR = {
					trait = proud
					NOT = { lower_tier_than = FROM }
					prestige = 250
				}
			}	
		}
		NOT = { has_character_flag = loyalty_bought }
	}
	
	chance = { #AI modifiers here, FROM is plotter scope
		factor = 10
				
		modifier = {
			factor = 1.5
			opinion = { who = FROM value = 25 } 
		}
		modifier = {
			factor = 1.5
			opinion = { who = FROM value = 50 } 
		}
		modifier = {
			factor = 1.5
			opinion = { who = FROM value = 75 } 
		}
		modifier = {
			factor = 1.5
			liege = {
				NOT = { FROM = { opinion = { who = PREV value = -75 } } } 
			}	
		}
		modifier = {
			factor = 1.5
			liege = {
				NOT = { FROM = { opinion = { who = PREV value = -50 } } } 
			}	
		}
		modifier = {
			factor = 1.5
			liege = {
				NOT = { FROM = { opinion = { who = PREV value = -25 } } } 
			}	
		}
		modifier = {
			factor = 1.5
			liege = {
				NOT = { FROM = { opinion = { who = PREV value = 0 } } } 
			}	
		}
		modifier = {
			factor = 0.5
			liege = {
				FROM = { opinion = { who = PREV value = 25 } } 
			}	
		}
		modifier = {
			factor = 0.5
			liege = {
				FROM = { opinion = { who = PREV value = 50 } } 
			}	
		}
		modifier = {
			factor = 0.5
			liege = {
				FROM = { opinion = { who = PREV value = 75 } } 
			}	
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = liege value = -75 } }
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = liege value = -50 } }
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = liege value = -25 } }
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = liege value = 0 } }
		}
		modifier = {
			factor = 0.5
			opinion = { who = liege value = 20 } 
		}
		modifier = {
			factor = 0.5
			opinion = { who = liege value = 40 } 
		}
		modifier = { #child or spouse
			factor = 2
			OR = {
				father = { character = FROM }
				mother = { character = FROM }
				is_married = FROM
			}
		}
		
		modifier = { #sibling or close family or friend
			factor = 1.5
			OR = {
				sibling = FROM
				is_close_relative = FROM
				family = FROM
				is_friend = FROM
			}
		}
		
		modifier = { #dynasty or in-laws
			factor = 1.2
			OR = {
				dynasty = FROM #same dynasty
				FROM = {
					spouse = {
						dynasty = ROOT
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			OR = {
				FROM = { trait = stressed }
				FROM = { trait = depressed }
			}
		}	
		modifier = {
			factor = 2
			OR = {
				FROM = { trait = lunatic }
				FROM = { trait = possessed }
			}
		}	
		modifier = {
			factor = 2
			FROM = {
				OR = {
					is_strong_trigger = yes
					is_smart_trigger = yes
					trait = genius
				}
			}
		}		
		modifier = {
			factor = 1.5
			FROM = { trait = diligent }
		}		
		modifier = {
			factor = 0.5
			FROM = {
				OR = {
					trait = patient
					trait = humble
				}
			}
		}	
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}	
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}		
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}	
		modifier = {
			factor = 3
			FROM = { trait = ruthless }
		}
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}	
		modifier = {
			factor = 0.5
			FROM = { trait = just }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
	}
	
	success = { #FROM is plotter scope
		has_opinion_modifier = {
			who = FROM
			modifier = opinion_loyalty_bought
		}
	}
	
	abort = {
		OR = {
			AND = {
				NOT = { is_councillor = yes }	
				NOT = { #Buy Freeholder vote in Triarchy
					FROM = { 
						OR = {
							trait = elephant
							trait = tiger
						}	
					}
					OR = {
						trait = elephant
						trait = tiger
					}	
					is_patrician = no
					NOT = { has_character_flag = triarch }				
				}
			}	
			ai = no
			prisoner = yes
			liege = { character = FROM }
			has_character_flag = loyalty_bought
			FROM  = { has_character_flag = buy_loyalty_ploy_fail }
			FROM = { has_character_flag = abort_plot }
		}
	}
	
	abort_effect = { #FROM is plotter scope
		FROM  = { 
			clr_character_flag = buy_loyalty_ploy_fail 
			clr_character_flag = plot_buy_loyalty_decision_taken
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
	}
	
	effect = {
		FROM = { 
			clr_character_flag = plot_buy_loyalty_decision_taken 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
		if = { # Once a councillor's loyalty is bought, the buyer will probably want to make sure they stay on the council
			limit = {
				is_councillor = yes
				NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
			}
			opinion = { who = FROM modifier = opinion_council_sponsor }
		}
	}
}

plot_replace_castellan = {
	type = realm_characters
	# military_plot = yes #sometimes causes CTDs
	intrigue_plot = yes
	
	potential = {
		has_ambition = obj_become_castellan
		NOT = {
			any_backed_character = {
				has_plot = plot_replace_castellan
				same_liege = ROOT
			}
		}
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		same_liege = FROM
		has_job_title = job_castellan
	}
	
	player_allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	
	chance = {
		factor = 500
		# modifier = {
			# factor = 0
			# attribute_diff = { character = FROM attribute = stewardship value = 4 }
			# NOT = { age = 60 }
			# FROM = {
				# NOT = { trait = proud }
				# NOT = { trait = ambitious }
				# NOT = { trait = envious }				
				# is_patrician = no
			# }
		# }
	}
	success = { FROM = { has_job_title = job_castellan } }
	abort = {
		OR = {
			NOT = {
				OR = {
					has_job_title = job_castellan
					FROM = { has_job_title = job_castellan }
				}
			}
			NOT = {
				OR = {
					FROM = { has_job_title = job_castellan }
					FROM = { has_ambition = obj_become_castellan }
				}
			}
			FROM = { has_character_flag = abort_plot }
			FROM = { has_character_flag = flag_job_petition_rejected }
		}
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = flag_plot_council_triarch_appeal_decision
		}
		FROM = { clr_character_flag = flag_job_petition_rejected }
	}
	effect = {
		FROM = {
			clr_character_flag = flag_plot_council_triarch_appeal_decision
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			any_plot_backer = {
				reverse_opinion = { who = FROM modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_rival_council_sponsor }
			}
		}
		opinion = { who = FROM modifier = opinion_rival_council_candidate }
		any_realm_character = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
			reverse_opinion = { who = FROM modifier = opinion_rival_council_sponsor }
		}
		if = {
			limit = { NOT = { has_character_flag = flag_replaced_by_plot_event } }
			FROM = {
				liege = {
					any_realm_character = {
						limit = { any_backed_character = { character = FROM } }
						opinion = { who = PREV modifier = opinion_approved_council_candidate }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = flag_replaced_by_plot_event }
			any_realm_character = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_former_council_sponsor }
			}
			clr_character_flag = flag_replaced_by_plot_event
		}
	}
}

plot_replace_chancellor = {
	type = realm_characters_plus
	# military_plot = yes #sometimes causes CTDs
	intrigue_plot = yes
	
	potential = {
		has_ambition = obj_become_chancellor
		NOT = {
			any_backed_character = {
				has_plot = plot_replace_chancellor
				same_liege = ROOT
			}
		}
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		same_liege = FROM
		has_job_title = job_chancellor
	}
	
	player_allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	allow = {		
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	
	chance = {
		factor = 500
		modifier = {
			factor = 0
			attribute_diff = { character = FROM attribute = diplomacy value = 4 }
			NOT = { age = 60 }
			FROM = {
				NOT = { trait = proud }
				NOT = { trait = ambitious }
				NOT = { trait = envious }				
				is_patrician = no
			}
		}
	}
	success = {
		FROM = { has_job_title = job_chancellor }
	}
	abort = {
		OR = {
			NOT = {
				OR = {
					has_job_title = job_chancellor
					FROM = { has_job_title = job_chancellor }
				}
			}
			NOT = {
				OR = {
					FROM = { has_job_title = job_chancellor }
					FROM = { has_ambition = obj_become_chancellor }
				}
			}
			FROM = { has_character_flag = abort_plot }
			FROM = { has_character_flag = flag_job_petition_rejected }
		}
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = flag_plot_council_triarch_appeal_decision
		}
		FROM = { clr_character_flag = flag_job_petition_rejected }
	}
	effect = {
		FROM = {
			clr_character_flag = flag_plot_council_triarch_appeal_decision
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			any_plot_backer = {
				reverse_opinion = { who = FROM modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_rival_council_sponsor }
			}
		}
		opinion = { who = FROM modifier = opinion_rival_council_candidate }
		any_realm_character = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
			reverse_opinion = { who = FROM modifier = opinion_rival_council_sponsor }
		}
		if = {
			limit = { NOT = { has_character_flag = flag_replaced_by_plot_event } }
			FROM = {
				liege = {
					any_realm_character = {
						limit = { any_backed_character = { character = FROM } }
						opinion = { who = PREV modifier = opinion_approved_council_candidate }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = flag_replaced_by_plot_event }
			any_realm_character = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_former_council_sponsor }
			}
			clr_character_flag = flag_replaced_by_plot_event
		}
	}
}

plot_replace_marshal = {
	type = realm_characters_plus
	# military_plot = yes #sometimes causes CTDs
	intrigue_plot = yes
	
	potential = {
		has_ambition = obj_become_marshal
		NOT = {
			any_backed_character = {
				has_plot = plot_replace_marshal
				same_liege = ROOT
			}
		}
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		same_liege = FROM
		has_job_title = job_marshal
	}
	
	player_allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	allow = {		
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	
	chance = {
		factor = 500
		modifier = {
			factor = 0
			attribute_diff = { character = FROM attribute = martial value = 4 }
			NOT = { age = 60 }
			FROM = {
				NOT = { trait = proud }
				NOT = { trait = ambitious }
				NOT = { trait = envious }				
				is_patrician = no
			}
		}
	}
	success = {
		FROM = { has_job_title = job_marshal }
	}
	abort = {
		OR = {
			NOT = {
				OR = {
					has_job_title = job_marshal
					FROM = { has_job_title = job_marshal }
				}
			}
			NOT = {
				OR = {
					FROM = { has_job_title = job_marshal }
					FROM = { has_ambition = obj_become_marshal }
				}
			}
			FROM = { has_character_flag = abort_plot }
			FROM = { has_character_flag = flag_job_petition_rejected }
		}
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = flag_plot_council_triarch_appeal_decision
		}
		FROM = { clr_character_flag = flag_job_petition_rejected }
	}
	effect = {
		FROM = {
			clr_character_flag = flag_plot_council_triarch_appeal_decision
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			any_plot_backer = {
				reverse_opinion = { who = FROM modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_rival_council_sponsor }
			}
		}
		opinion = { who = FROM modifier = opinion_rival_council_candidate }
		any_realm_character = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
			reverse_opinion = { who = FROM modifier = opinion_rival_council_sponsor }
		}
		if = {
			limit = { NOT = { has_character_flag = flag_replaced_by_plot_event } }
			FROM = {
				liege = {
					any_realm_character = {
						limit = { any_backed_character = { character = FROM } }
						opinion = { who = PREV modifier = opinion_approved_council_candidate }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = flag_replaced_by_plot_event }
			any_realm_character = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_former_council_sponsor }
			}
			clr_character_flag = flag_replaced_by_plot_event
		}
	}
}

plot_replace_treasurer = {
	type = realm_characters_plus
	# military_plot = yes #sometimes causes CTDs
	intrigue_plot = yes
	
	potential = {
		has_ambition = obj_become_treasurer
		NOT = {
			any_backed_character = {
				has_plot = plot_replace_treasurer
				same_liege = ROOT
			}
		}
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		same_liege = FROM
		has_job_title = job_treasurer
	}
	
	player_allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	allow = {		
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	
	chance = {
		factor = 500
		modifier = {
			factor = 0
			attribute_diff = { character = FROM attribute = stewardship value = 4 }
			NOT = { age = 60 }
			FROM = {
				NOT = { trait = proud }
				NOT = { trait = ambitious }
				NOT = { trait = envious }				
				is_patrician = no
			}
		}
	}
	success = {
		FROM = { has_job_title = job_treasurer }
	}
	abort = {
		OR = {
			NOT = {
				OR = {
					has_job_title = job_treasurer
					FROM = { has_job_title = job_treasurer }
				}
			}
			NOT = {
				OR = {
					FROM = { has_job_title = job_treasurer }
					FROM = { has_ambition = obj_become_treasurer }
				}
			}
			FROM = { has_character_flag = abort_plot }
			FROM = { has_character_flag = flag_job_petition_rejected }
		}
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = flag_plot_council_triarch_appeal_decision
		}
		FROM = { clr_character_flag = flag_job_petition_rejected }
	}
	effect = {
		FROM = {
			clr_character_flag = flag_plot_council_triarch_appeal_decision
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			any_plot_backer = {
				reverse_opinion = { who = FROM modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_rival_council_sponsor }
			}
		}
		opinion = { who = FROM modifier = opinion_rival_council_candidate }
		any_realm_character = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
			reverse_opinion = { who = FROM modifier = opinion_rival_council_sponsor }
		}
		if = {
			limit = { NOT = { has_character_flag = flag_replaced_by_plot_event } }
			FROM = {
				liege = {
					any_realm_character = {
						limit = { any_backed_character = { character = FROM } }
						opinion = { who = PREV modifier = opinion_approved_council_candidate }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = flag_replaced_by_plot_event }
			any_realm_character = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_former_council_sponsor }
			}
			clr_character_flag = flag_replaced_by_plot_event
		}
	}
}

plot_replace_spymaster = {
	type = realm_characters_plus
	# military_plot = yes #sometimes causes CTDs
	intrigue_plot = yes
	
	potential = {
		has_ambition = obj_become_spymaster
		NOT = {
			any_backed_character = {
				has_plot = plot_replace_spymaster
				same_liege = ROOT
			}
		}
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		same_liege = FROM
		has_job_title = job_spymaster
	}
	
	player_allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	allow = {		
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	
	chance = {
		factor = 500
		modifier = {
			factor = 0
			attribute_diff = { character = FROM attribute = intrigue value = 4 }
			NOT = { age = 60 }
			FROM = {
				NOT = { trait = proud }
				NOT = { trait = ambitious }
				NOT = { trait = envious }				
				is_patrician = no
			}
		}
	}
	success = {
		FROM = { has_job_title = job_spymaster }
	}
	abort = {
		OR = {
			NOT = {
				OR = {
					has_job_title = job_spymaster
					FROM = { has_job_title = job_spymaster }
				}
			}
			NOT = {
				OR = {
					FROM = { has_job_title = job_spymaster }
					FROM = { has_ambition = obj_become_spymaster }
				}
			}
			FROM = { has_character_flag = abort_plot }
			FROM = { has_character_flag = flag_job_petition_rejected }
		}
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = flag_plot_council_triarch_appeal_decision
		}
		FROM = { clr_character_flag = flag_job_petition_rejected }
	}
	effect = {
		FROM = {
			clr_character_flag = flag_plot_council_triarch_appeal_decision
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			any_plot_backer = {
				reverse_opinion = { who = FROM modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_rival_council_sponsor }
			}
		}
		opinion = { who = FROM modifier = opinion_rival_council_candidate }
		any_realm_character = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
			reverse_opinion = { who = FROM modifier = opinion_rival_council_sponsor }
		}
		if = {
			limit = { NOT = { has_character_flag = flag_replaced_by_plot_event } }
			FROM = {
				liege = {
					any_realm_character = {
						limit = { any_backed_character = { character = FROM } }
						opinion = { who = PREV modifier = opinion_approved_council_candidate }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = flag_replaced_by_plot_event }
			any_realm_character = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_former_council_sponsor }
			}
			clr_character_flag = flag_replaced_by_plot_event
		}
	}
}
plot_replace_councillor = {
	type = realm_characters
	# military_plot = yes #sometimes causes CTDs
	intrigue_plot = yes
	
	potential = {
		has_ambition = obj_become_councillor
		NOT = {
			any_backed_character = {
				has_plot = plot_replace_councillor
				same_liege = ROOT
			}
		}
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		same_liege = FROM
		OR = {
			has_minor_title = title_councilmember_king
			has_minor_title = title_councilmember_emperor
			AND = {
				#OR = {
					has_minor_title = title_high_admiral
					#has_minor_title = title_master_of_ships
				#}
				FROM = { can_be_admiral_trigger = yes }
			}
		}
		NOR = {
			has_job_title = job_castellan
			has_job_title = job_chancellor
			has_job_title = job_treasurer
			has_job_title = job_marshal
			has_job_title = job_spymaster
			has_job_title = job_spiritual
			has_job_title = job_priest
		}
	}
	
	player_allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
	}
	
	chance = {
		factor = 250
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
		# modifier = {
			# factor = 0
			# attribute_diff = { character = FROM attribute = stewardship value = 4 }
			# NOT = { age = 60 }
			# FROM = {
				# NOT = { trait = proud }
				# NOT = { trait = ambitious }
				# NOT = { trait = envious }				
				# is_patrician = no
			# }
		# }
	}
	success = { 
		is_voter = no
		FROM = { is_voter = yes } 
	}
	abort = {
		OR = {
			AND = {
				is_voter = no
				FROM = { is_voter = no } 
			}	
			AND = {
				is_voter = yes
				FROM = { is_voter = yes } 
			}
			NOT = { same_liege = FROM }
			has_job_title = job_castellan
			has_job_title = job_chancellor
			has_job_title = job_treasurer
			has_job_title = job_marshal
			has_job_title = job_spymaster
			has_job_title = job_spiritual
			has_job_title = job_priest
			FROM = { has_character_flag = abort_plot }
			FROM = { has_character_flag = flag_job_petition_rejected }
		}
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = flag_plot_council_triarch_appeal_decision
		}
		FROM = { clr_character_flag = flag_job_petition_rejected }
	}
	effect = {
		FROM = {
			clr_character_flag = flag_plot_council_triarch_appeal_decision
			clr_character_flag = flag_plot_replace_councillor_decision
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			any_plot_backer = {
				reverse_opinion = { who = FROM modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_rival_council_sponsor }
			}
		}
		opinion = { who = FROM modifier = opinion_rival_council_candidate }
		any_realm_character = {
			limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
			reverse_opinion = { who = FROM modifier = opinion_rival_council_sponsor }
		}
		if = {
			limit = { NOT = { has_character_flag = flag_replaced_by_plot_event } }
			FROM = {
				liege = {
					any_realm_character = {
						limit = { any_backed_character = { character = FROM } }
						opinion = { who = PREV modifier = opinion_approved_council_candidate }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = flag_replaced_by_plot_event }
			any_realm_character = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_council_sponsor }
				reverse_opinion = { who = ROOT modifier = opinion_former_council_sponsor }
			}
			clr_character_flag = flag_replaced_by_plot_event
		}
	}
}
# Character plots to imprison a character
plot_kidnap_character = {
	type = realm_characters_plus # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes
	
	# Plotter scope
	potential = {
		is_ruler = yes
		prisoner = no
		is_adult = yes
		NOT = { trait = incapable }	
		NAND = {
			ai = yes
			OR = {
				trait = honest
				trait = kind
				trait = honorable
			}	
		}
		NOT = { trait = wikid }	
	}
	
	target_potential = {
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = dragon }
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }
		OR = {
			is_ruler = no
			is_liege_or_above = FROM
			is_liege_of = FROM
			any_current_enemy = { character = FROM }
		}
	}
	
	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {		
		prisoner = no	
		#same_realm = FROM
		is_within_diplo_range = FROM
	}
	
	# Target scope
	allow = {
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }	
		OR = {
			is_ruler = no
			is_liege_or_above = FROM
			is_liege_of = FROM
			any_current_enemy = { character = FROM }
		}	
		prisoner = no	
		is_within_diplo_range = FROM	
		OR = {
			NOT = { reverse_opinion = { who = FROM value = 0 } }
			NOT = { is_close_relative = FROM }
		}
		
		#Motives
		hidden_tooltip = {
			OR = {
				# has my de jure vassal in a kingdom where inter-vassal fighting isn't allowed
				AND = {
					same_liege = FROM
					FROM = {
						liege = {
							NOR = {
								is_mother = ROOT
								is_father = ROOT
								is_child_of = ROOT
								sibling = ROOT
								is_married = ROOT
							}
						}
					}
					any_vassal = {
						lower_tier_than = FROM
						higher_tier_than = BARON
						OR = {
							de_jure_liege = FROM
							dejure_liege_title = { claimed_by = FROM }
						}
						war = no
						is_patrician = no
					}
				}
				# holds a county claim of mine in a kingdom where inter-vassal fighting isn't allowed
				AND = {
					same_liege = FROM
					FROM = {
						liege = {
							NOR = {
								is_mother = ROOT
								is_father = ROOT
								is_child_of = ROOT
								sibling = ROOT
								is_married = ROOT
							}
						}
					}
					any_demesne_title = {
						lower_tier_than = DUKE
						can_be_given_away = yes
						is_primary_holder_title = no
						location = { is_capital = no }
						OR = {
							claimed_by = FROM
							dejure_liege_title = { claimed_by = FROM }
							de_jure_liege_or_above = FROM
						}
					}
				}
				# I need to stop their plot but can't arrest them
				AND = {
					NOT = { is_liege_or_above = FROM }
					FROM = {
						liege = {
							NOR = {
								is_mother = ROOT
								is_father = ROOT
								is_child_of = ROOT
								sibling = ROOT
								is_married = ROOT
							}
						}
						any_known_plotter = {
							character = ROOT
							plot_target_char = {
								OR = {
									character = PREVPREV
									is_child_of = PREVPREV
									is_mother = PREVPREV
									is_father = PREVPREV
									is_married = PREVPREV
								}
							}
						}
					}
				}
				# I want to execute them but can't arrest them
				AND = {
					NOT = { is_liege_or_above = FROM }
					FROM = { ROOT = { just_execution_reason_PREV_trigger = yes } }
				}
				FROM = {
					OR = {	
						any_current_enemy = { character = ROOT } #At War
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_claimant_adventure_target } #Is planning adventure against me
						AND = { #Power concerns
							OR = {
								trait = ruthless
								trait = paranoid
								trait = wroth
								trait = arbitrary
							}
							NOT = { trait = just }
							OR = {
								AND = { #Claimant
									any_demesne_title = {
										ROOT = { has_claim = PREV }
									}
									NOT = { current_heir = { character = ROOT } }
									ROOT = {
										NOT = { is_child_of = PREV }
										NOT = { is_married = PREV }
										NOT = { liege = { character = PREVPREV } }
									}											
								}
								AND = { #Dangerous Vassal
									NOT = { trait = trusting }
									any_vassal = { 
										character = ROOT 
										OR = {
											AND = {
												relative_power_to_liege = 0.2
												NOT = { opinion = { who = PREV value = -50 } }
											}
											AND = {
												leads_faction = yes 
												NOT = { leads_faction = faction_liege_loyalist }
												NOT = { leads_faction = faction_crown_loyalist }
											}	
										}
									}								
								}
							}	
						}	
						AND = { #Potential forced marriage target
							is_married = no
							is_female = no
							NOT = { opinion = { who = ROOT value = 40 } }
							NOT = { trait = just }
							can_marry = ROOT
							OR = {
								is_feudal = yes
								higher_tier_than = BARON
							}
							ROOT = {
								is_female = yes
								age = 10
								is_married = no
								NOT = { trait = incapable }
								NOT = { age = 30 }
								OR = {
									#Target has a title or claim that is equal or higher to FROM's rank
									NOT = { lower_tier_than = PREV }
									any_heir_title = { NOT = { lower_tier_than = PREVPREV } }
									any_claim = { NOT = { lower_tier_than = PREVPREV } }
									AND = { #Horny bastard
										trait = fair
										FROM = { trait = lustful }
									}
								}
							}	
							NOT = { trait = celibate }
							NOT = { trait = eunuch }
						}
						# Go nuts...
						AND = {
							same_realm = ROOT
							OR = {
								trait = lunatic
								trait = possessed
							}
						}					
					}
				}
			}	
		}
	}
	
	chance = {
		factor = 2
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		
		modifier = {
			factor = 0.01			
			# Kinslaying is generally discouraged
			FROM = {
				OR = {
					AND = {
						NOT = { dynasty = 0 }
						dynasty = ROOT
					}	
					is_close_relative = ROOT
				}	
				NOT = { trait = arbitrary }
				NOT = { trait = ruthless }
				NOT = { trait = cruel }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
		}
		modifier = { #non trusting kin will really try to kill kinslayers
			factor = 10
			FROM = { 
				NOT = { dynasty = 0 }
				dynasty = root 
				NOT = { trait = trusting }
			}
			trait = kinslayer
		}
		modifier = {
			factor = 0
			FROM = { NOT = { intrigue = 6 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = cruel }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}

		modifier = { #if relative of my liege, reluctant to piss off
			factor = 0.05
			FROM = {
				any_liege = {
					OR = {
						is_child_of = ROOT
						any_child = { character = ROOT }
						sibling = ROOT
					}
					relative_power = { who = PREV power = 2 }
				}
				NOT = { trait = lunatic } 
			}
		}
		
		modifier = {
			factor = 2.0
			FROM = {
				OR = {
					trait = wroth
					trait = just
					trait = diligent
					trait = ruthless
				}
			}
			OR = {
				any_war = {
					attacker = { character = ROOT }
					defender = { character = FROM }
				}
				any_war = {
					attacker = { character = FROM }
					defender = { character = ROOT }
				}
				FROM = {
					any_known_plotter = {
						character = ROOT
						plot_target_char = {
							OR = {
								character = PREVPREV
								is_child_of = PREVPREV
								is_mother = PREVPREV
								is_father = PREVPREV
								is_married = PREVPREV
							}
						}
					}
				}
				FROM = { ROOT = { just_execution_reason_PREV_trigger = yes } }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = honest
					trait = just
					trait = humble
					trait = honorable
				}
			}
			NOR = {
				any_war = {
					attacker = { character = ROOT }
					defender = { character = FROM }
				}
				any_war = {
					attacker = { character = FROM }
					defender = { character = ROOT }
				}
				FROM = {
					any_known_plotter = {
						character = ROOT
						plot_target_char = {
							OR = {
								character = PREVPREV
								is_child_of = PREVPREV
								is_mother = PREVPREV
								is_father = PREVPREV
								is_married = PREVPREV
							}
						}
					}
				}
				FROM = { ROOT = { just_execution_reason_PREV_trigger = yes } }
			}
		}		
		modifier = {
			factor = 5
			FROM = { 
				OR = {
					has_opinion_modifier = { who = ROOT modifier = opinion_vengeance } #Seeks vengeance
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_claimant_adventure_target } #Is planning adventure against me
				}	
			}
		}
	}
	
	success = {
		prisoner = yes
		host = { character = FROM }
	}
	abort = {
		OR = {	
			AND = {
				prisoner = yes
				host = { NOT = { character = FROM } }
			}
			FROM = { has_character_flag = abort_plot }
			FROM = { had_character_flag = { flag = plot_in_action days = 7 } }
			FROM = { prisoner = yes }
			is_alive = no
			FROM = { trait = incapable }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
			}
		}
	}
	effect = {
		FROM = {
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
				any_plot_backer = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}
		}
	}
}

# Kidnap liege and force him to give you a piece of land
plot_kidnap_liege = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = no
		is_adult = yes
		NOT = { trait = incapable }
		OR = {
			has_opinion_modifier = { who = liege modifier = opinion_denied_title }
			has_opinion_modifier = { who = liege modifier = opinion_broken_title_promise }
		}	
		NOT = { trait = incapable }
		NOT = { trait = dragon }
		OR = {
			NOR = {
				trait = honest
				trait = kind
				trait = honorable
			}	
			trait = lunatic
			trait = possessed
		}	
		NOT = { trait = wikid }			
	}
	
	target_potential = {
		is_vassal_or_below  = FROM
	}
	
	# Target scope
	allow = {	
		NOT = { has_opinion_modifier = { who = FROM modifier = kidnapped_me } }
		NOT = { is_married = FROM }
		any_demesne_title = {
			can_be_given_away = yes
			tier = COUNT
			location = { is_capital = no }
			OR = {
				claimed_by = FROM
				FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_denied_title } }
				FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_broken_title_promise } }
				FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_disinherited_me } }
				FROM = { has_opinion_modifier = { who = ROOT modifier = bad_succ_law_change } }
			}
		}
	}
	
	chance = {
		factor = 1
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0
			FROM = { NOT = { intrigue = 6 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = cruel }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}

		modifier = {
			factor = 0
			FROM = {
				is_female = yes
				NOR = {
					trait = ambitious
					trait = lunatic
					trait = possessed
				}
			}
			NOT = {
				any_demesne_title = {
					can_be_given_away = yes
					tier = COUNT
					location = { is_capital = no }
					NOR = {
						has_law = agnatic_succession
						has_law = cognatic_succession
					}
					OR = {
						claimed_by = FROM
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_denied_title } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_broken_title_promise } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_disinherited_me } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = bad_succ_law_change } }
					}
				}
			}
		}
		modifier = {
			factor = 0
			FROM = {
				is_female = no
				NOR = {
					trait = ambitious
					trait = lunatic
					trait = possessed
				}
			}
			NOT = {
				any_demesne_title = {
					can_be_given_away = yes
					tier = COUNT
					location = { is_capital = no }
					NOR = {
						has_law = enatic_succession
						has_law = enatic_cognatic_succession
					}
					OR = {
						claimed_by = FROM
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_denied_title } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_broken_title_promise } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_disinherited_me } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = bad_succ_law_change } }
					}
				}
			}
		}
		modifier = {
			factor = 0
			FROM = {
				any_heir_title = { always = yes }
				NOR = {
					has_opinion_modifier = { who = ROOT modifier = opinion_denied_title }
					has_opinion_modifier = { who = ROOT modifier = opinion_broken_title_promise }
				}
			}
		}
		modifier = {
			factor = 0.5
			NOT = { is_liege_of = FROM }
		}
		modifier = {
			factor = 0.5
			NOT = {
				any_demesne_title = {
					can_be_given_away = yes
					tier = COUNT
					location = { is_capital = no }
					OR = {
						FROM = { has_strong_claim = PREV }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_denied_title } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_broken_title_promise } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_disinherited_me } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = bad_succ_law_change } }
					}
				}
			}
		}
		modifier = {
			factor = 0
			FROM = { war = yes }
		}
		modifier = {
			factor = 3.0
			OR = {
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_broken_title_promise }
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_disinherited_me }
				reverse_has_opinion_modifier = { who = FROM modifier = bad_succ_law_change }
			}
		}
		
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			has_character_modifier = feared_1
		}
		modifier = {
			factor = 0.5
			has_character_modifier = feared_2
		}
		modifier = {
			factor = 0.3
			has_character_modifier = feared_3
		}
		modifier = {
			factor = 0.2
			has_character_modifier = feared_4
		}
		modifier = {
			factor = 0.1
			has_character_modifier = feared_5
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
	}
	
	success = {
		FROM = { 
			has_character_flag = kidnap_attempt		
			is_ruler = yes
		}
	}
	abort = {
		OR = {	
			FROM = { has_character_flag = abort_plot }
			FROM = { prisoner = yes }
			FROM = { 
				is_ruler = yes
				NOT = { has_character_flag = kidnap_attempt }
			}
			is_married = FROM
			FROM = { trait = incapable }
			NOT = { is_vassal_or_below = FROM }
			NOT = {
				any_demesne_title = {
					can_be_given_away = yes
					tier = COUNT
					location = { is_capital = no }
					OR = {
						claimed_by = FROM
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_denied_title } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_broken_title_promise } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = opinion_disinherited_me } }
						FROM = { has_opinion_modifier = { who = ROOT modifier = bad_succ_law_change } }
					}
				}
			}
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				clr_character_flag = kidnap_attempt
				clr_character_flag = kidnap_in_transit
				clr_character_flag = kidnap_in_bed
				clr_character_flag = kidnap_while_hunting
				clr_character_flag = kidnap_while_carousing
			}
		}
	}
	effect = {
		FROM = {
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				clr_character_flag = kidnap_attempt
				clr_character_flag = kidnap_in_transit
				clr_character_flag = kidnap_in_bed
				clr_character_flag = kidnap_while_hunting
				clr_character_flag = kidnap_while_carousing
				set_character_flag = obj_landed_title
			}
		}
	}
}

# Character plots to make a character revolt against their liege
plot_instigate_revolt = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	vassal_intrigue_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		age = 16	
		is_ruler = yes
		NOT = { trait = incapable }
		OR = { 
			higher_tier_than = baron 
			is_patrician = yes 
		}	
		NOT = {
			AND = {
				ai = yes
				OR = {
					trait = honest
					trait = kind
					trait = honorable
				}	
			}
		}	
	}
	
	target_potential = {
		is_ruler = yes
		higher_tier_than = baron
		independent = no
	}
	
	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }
		age = 16
		prisoner = no			
		NOT = { opinion = { who = liege value = 0 } }
	}
	
	# Target scope
	allow = {
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }	
		age = 16
		FROM = { independent = no }
		same_liege = FROM
		independent = no
		NOT = { opinion = { who = liege value = 0 } }	
	}
	
	chance = {
		factor = 2
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		
		modifier = {
			factor = 0
			FROM = { NOT = { intrigue = 6 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = just }
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = cruel }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
		
		modifier = {
			factor = 0
			FROM = { lower_tier_than = count }
		}			
		modifier = {
			factor = 0
			FROM = { opinion = { who = liege value = 25 } }
		}
		modifier = {
			factor = 0.25
			FROM = { opinion = { who = liege value = 0 } }
		}		
		modifier = {
			factor = 1.5
			FROM = { NOT = { opinion = { who = liege value = -25 } } }
		}
		modifier = {
			factor = 1.5
			FROM = { NOT = { opinion = { who = liege value = -50 } } }
		}
		modifier = {
			factor = 2.0
			FROM = { NOT = { opinion = { who = liege value = -75 } } }
		}			
		
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			is_vassal_or_below = FROM
			has_character_modifier = feared_1
		}
		modifier = {
			factor = 0.5
			is_vassal_or_below = FROM
			has_character_modifier = feared_2
		}
		modifier = {
			factor = 0.3
			is_vassal_or_below = FROM
			has_character_modifier = feared_3
		}
		modifier = {
			factor = 0.2
			is_vassal_or_below = FROM
			has_character_modifier = feared_4
		}
		modifier = {
			factor = 0.1
			is_vassal_or_below = FROM
			has_character_modifier = feared_5
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
	}
	
	success = {
		hidden_tooltip = {
			has_character_flag = plot_success
		}
		custom_tooltip = { text = CUSTOMTOOLTIP32 }
	}
	abort = {
		OR = {	
			opinion = { who = liege value = 25 }
			independent = yes
			prisoner = yes
			FROM = { has_character_flag = abort_plot }
			FROM = { prisoner = yes }
			is_alive = no
			FROM = { trait = incapable }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
			}
		}
	}
	effect = {
		clr_character_flag = plot_success
		FROM = {
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
				any_plot_backer = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}
		}
	}
}

# Character plots to fabricate evidence of treason
plot_fabricate_treason = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	vassal_intrigue_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		age = 16	
		is_ruler = yes
		NOT = { trait = incapable }
		OR = { 
			higher_tier_than = baron 
			is_patrician = yes 
		}
		OR = {
			intrigue = 12
			has_job_title = job_chancellor
		}	
		NOT = {
			AND = {
				ai = yes
				OR = {
					trait = honest
					trait = kind
					trait = honorable
				}	
			}
		}	
	}
	
	target_potential = {
		is_ruler = yes
		independent = no
	}
	
	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }
		age = 16
		prisoner = no	
		same_liege = FROM
		NOT = { FROM = { is_liege_of = ROOT } }
		NOT = {
			liege = {
				opinion = {
					who = ROOT
					value = 25
				}
			}
		}				
	}
	
	# Target scope
	allow = {
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }	
		age = 16
		is_ruler = yes
		prisoner = no	
		independent = no
		OR = { higher_tier_than = baron is_patrician = yes }		
		same_liege = FROM
		NOT = { FROM = { is_liege_of = ROOT } }
		NOT = {
			liege = {
				opinion = {
					who = ROOT
					value = 25
				}
			}
		}			
	}
	
	chance = {
		factor = 1
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		
		modifier = {
			factor = 0
			FROM = { NOT = { intrigue = 6 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = just }
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = cruel }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
			
		modifier = {
			factor = 0
			FROM = { opinion = { who = liege value = 25 } }
		}
		modifier = {
			factor = 0.25
			FROM = { opinion = { who = liege value = 0 } }
		}		
		modifier = {
			factor = 1.5
			FROM = { NOT = { opinion = { who = liege value = -25 } } }
		}
		modifier = {
			factor = 1.5
			FROM = { NOT = { opinion = { who = liege value = -50 } } }
		}
		modifier = {
			factor = 2.0
			FROM = { NOT = { opinion = { who = liege value = -75 } } }
		}			
		
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			is_vassal_or_below = FROM
			has_character_modifier = feared_1
		}
		modifier = {
			factor = 0.5
			is_vassal_or_below = FROM
			has_character_modifier = feared_2
		}
		modifier = {
			factor = 0.3
			is_vassal_or_below = FROM
			has_character_modifier = feared_3
		}
		modifier = {
			factor = 0.2
			is_vassal_or_below = FROM
			has_character_modifier = feared_4
		}
		modifier = {
			factor = 0.1
			is_vassal_or_below = FROM
			has_character_modifier = feared_5
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
	}
	
	success = {
		hidden_tooltip = {
			has_character_flag = plot_success
		}
		custom_tooltip = { text = CUSTOMTOOLTIP31 }
	}
	abort = {
		OR = {	
			liege = {
				opinion = {
					who = ROOT
					value = 50
				}
			}	
			FROM = { is_liege_of = ROOT }
			NOT = { same_liege = FROM }
			independent = yes
			prisoner = yes
			FROM = { has_character_flag = abort_plot }
			FROM = { prisoner = yes }
			is_alive = no
			FROM = { trait = incapable }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
			}
		}
	}
	effect = {
		clr_character_flag = plot_success
		FROM = {
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
				any_plot_backer = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}
		}
	}
}
# Character plots to fabricate evidence of treason
plot_fabricate_treason_liege = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	vassal_rank_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		age = 16	
		is_ruler = yes
		NOT = { trait = incapable }
		OR = { 
			higher_tier_than = baron 
			is_patrician = yes 
		}
		OR = {
			intrigue = 12
			has_job_title = job_chancellor
		}	
		NOT = {
			AND = {
				ai = yes
				OR = {
					trait = honest
					trait = kind
					trait = honorable
				}	
			}
		}		
	}
	
	target_potential = {
		is_ruler = yes
		independent = no
		FROM = { is_liege_of = ROOT }
	}
	
	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }
		age = 16
		prisoner = no					
	}
	
	# Target scope
	allow = {
		#NOT = { has_opinion_modifier = { who = FROM modifier = opinion_recent_plot } }	
		age = 16
		is_ruler = yes
		prisoner = no	
		independent = no
		OR = { higher_tier_than = baron is_patrician = yes }	
		FROM = { is_liege_of = ROOT }			
	}
	
	chance = {
		factor = 1
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		
		modifier = {
			factor = 0
			FROM = { NOT = { intrigue = 6 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = just }
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = cruel }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
		
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			has_character_modifier = feared_1
		}
		modifier = {
			factor = 0.5
			has_character_modifier = feared_2
		}
		modifier = {
			factor = 0.3
			has_character_modifier = feared_3
		}
		modifier = {
			factor = 0.2
			has_character_modifier = feared_4
		}
		modifier = {
			factor = 0.1
			has_character_modifier = feared_5
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
	}
	
	success = {
		hidden_tooltip = {
			has_character_flag = plot_success
		}
		custom_tooltip = { text = CUSTOMTOOLTIP31 }
	}
	abort = {
		OR = {	
			liege = { NOT = { character = FROM } }		
			independent = yes
			prisoner = yes
			FROM = { has_character_flag = abort_plot }
			FROM = { prisoner = yes }
			is_alive = no
			FROM = { trait = incapable }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
			}
		}
	}
	effect = {
		clr_character_flag = plot_success
		FROM = {
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = event7040
				clr_character_flag = plot_check
				clr_character_flag = allow_plotting
				clr_character_flag = plot_in_action
				clr_character_flag = abort_plot
				#reverse_opinion = { who = ROOT modifier = opinion_recent_plot months = 60 }
				any_plot_backer = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}
		}
	}
}

# Seize Trade Post (Republics only)
plot_seize_trade_post = {
	type = rep_trade_posts
	intrigue_plot = yes
	
	# Plotter scope
	potential = {
		#has_dlc = "The Republic"
		is_patrician = yes
		is_merchant_republic = no
		prisoner = no
		age = 16
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
	}
	
	target_potential = {
		has_trade_post = yes
		trade_post_owner = {
			OR = {
				same_liege = FROM
				is_liege_of = FROM
			}
			NOT = { character = FROM }
		}
	}
	
	# Target scope
	allow = {
		trade_post_owner = {
			custom_tooltip = { #has less or equal trade posts
				text = TOOLTIPplot_seize_trade_postA
				hidden_tooltip = {
					OR = {
						num_of_trade_post_diff = { character = FROM value = 1 }
						NOR = {
							num_of_trade_post_diff = { character = FROM value = 1 }
							FROM = { num_of_trade_post_diff = { character = PREV value = 1 } }
						}
					}	
				}
			}	
			custom_tooltip = { #not recently taken a trade post
				text = TOOLTIPplot_seize_trade_postB
				hidden_tooltip = {
					NOT = { 
						has_opinion_modifier = { who = FROM modifier = opinion_seized_tp }
					}
				}	
			}				
			FROM = { # Only if there is no non-aggression-pact with the trade post owner
				NOT = { has_non_aggression_pact_with = PREV }	
				NOT = { is_allied_with = PREV }				
			}
		}
		custom_tooltip = { #owns a neighbouring trade post
			text = TOOLTIPplot_seize_trade_postC
			hidden_tooltip = {
				any_neighbor_province = {
					has_trade_post = yes
					trade_post_owner = { 
						character = FROM
					}
				}
			}	
		}	
	}
	
	chance = {
		factor = 5 # Must be an integer
		
		modifier = {
			factor = 0
			holder_scope = { reverse_opinion = { who = FROM value = 50 } }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}	
		modifier = {
			factor = 0.1
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					is_close_relative = PREV
					OR = {
						opinion = { who = PREV value = 15 }
						trait = familyperson
					}
					NOT = { trait = ruthless }
				}
			}	
		}
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.56
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.68
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2.32
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -99 } } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			holder_scope = { FROM = { is_foe = PREV } }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			holder_scope = { NOT = { religion = FROM } }
		}
		
		modifier = {
			factor = 0.0
			FROM = { war = yes }
		}
		modifier = {
			factor = 5
			holder_scope = {
				num_of_trade_post_diff = {
					character = FROM
					value = 3
				}
			}
		}
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_1
			}	
		}
		modifier = {
			factor = 0.5
			holder_scope = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_2
			}	
		}
		modifier = {
			factor = 0.3
			holder_scope = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_3
			}	
		}
		modifier = {
			factor = 0.2
			holder_scope = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_4
			}	
		}
		modifier = {
			factor = 0.1
			holder_scope = {
				is_vassal_or_below = FROM
				has_character_modifier = feared_5
			}	
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				is_vassal_or_below = FROM
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5 
				}	
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			holder_scope = {
				is_vassal_or_below = FROM
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5 
				}	
			}	
		}
	}
	
	success = {
		trade_post_owner = { 
			character = FROM
		}
	}
	abort = {
#		holder = {
#			independent = yes
#		}
		FROM = { 
			OR = {
				prisoner = yes
				is_patrician = no
				trait = incapable
				has_character_flag = abort_plot 
			}	
		}
	}
	abort_effect = {
		FROM = {
			clr_character_flag = plot_seize_trade_post_decision_taken
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
	}
	effect = {
		seize_trade_post = FROM
		FROM = {
			clr_character_flag = plot_seize_trade_post_decision_taken
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
		}
	}
}

# plot_kill_dragon = {
	# type = realm_characters_plus
	# intrigue_plot = yes
	# murder_plot = yes
	
	# # Plotter scope
	# potential = {
		# OR = {
			# AND = {
				# is_playable = yes
				# is_feudal = yes
				# is_landed = yes
			# }	
			# trait = maester #Maester conspiracy?
			# trait = archmaester
		# }	
		# prisoner = no
		# age = 16
		# mercenary = no	
		# NOT = { trait = incapable }
		# NOT = { trait = imbecile }
		# OR = {
			# ai = no
			# NOT = {
				# OR = {
					# religion = valyrian
					# culture_group = valyrian
				# }
			# }
			# OR = {
				# trait = ruthless 
				# trait = dishonorable1
				# trait = dishonorable2
				# trait = dishonorable3
				# trait = dishonorable4
				# trait = dishonorable5
				# trait = dishonorable6
				# trait = dishonorable7
				# trait = dishonorable8
				# trait = dishonorable9
				# trait = dishonorable10
			# }
		# }
		# NOT = {
			# AND = {
				# ai = yes
				# OR = {
					# trait = honest
					# trait = craven
					# trait = honorable
					# trait = content
				# }	
			# }
		# }
		# hidden_tooltip = {
			# OR = {
				# ai = no # Human

				# # Is dragon slayer
				# trait = dragon_slayer
				
				# # Is nuts...
				# trait = lunatic
				# trait = possessed
				
				# # Is willing or eager to kill
				# trait = ambitious
				# trait = ruthless
				
				# # Maester Conspiracy
				# trait = archmaester
			# }
		# }
	# }
	
	# # Target character scope
	# allow = {
		# OR = {
			# trait = child_dragon
			# trait = dragon
		# }
		# FROM = { #Maesters can only target dragons in same court, or be grand maester/head archmaester
			# OR = {
				# has_landed_title = c_the_citadel
				# has_minor_title = title_grandmaester
				# liege = { character = ROOT }
				# liege = { any_courtier = { character = ROOT } }
			# }
		# }
	# }
	
	# chance = {
		# factor = 1
		
		# modifier = {
			# factor = 0.25
			# FROM = {
				# OR = {
					# religion = valyrian
					# culture_group = valyrian
				# }
			# }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 100 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 90 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 80 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 70 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 60 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 50 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 40 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 30 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 20 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 10 }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -9 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -19 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -29 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -39 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -49 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -59 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -69 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -79 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -89 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -99 } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { trait = just }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { 
				# OR = {
					# trait = dishonorable1
					# trait = dishonorable2
					# trait = dishonorable3
					# trait = dishonorable4
					# trait = dishonorable5
					# trait = dishonorable6
					# trait = dishonorable7
					# trait = dishonorable8
					# trait = dishonorable9
					# trait = dishonorable10
				# }
			# }
		# }	
		# modifier = {
			# factor = 1.5
			# FROM = { trait = deceitful }
		# }
		# modifier = { #Maesters can sabotage growth of child dragons
			# factor = 5
			# FROM = { 
				# OR = {
					# trait = archmaester 
					# trait = maester
				# }	
			# }
			# trait = child_dragon
		# }
	# }
	
	# success = {
		# NOT = {
			# OR = {
				# trait = dragon
				# trait = child_dragon
			# }
		# }
		# hidden_tooltip = {
			# FROM = { has_character_flag = dragon_murder_in_motion }
		# }
	# }
	# abort = {
		# is_alive = no
	# }
	# abort_effect = {
		# FROM = { clr_character_flag = dragon_murder_in_motion }
	# }
	# effect = {
		# FROM = {
			# clr_character_flag = dragon_murder_in_motion
			# # Achievement
			# hidden_tooltip = {
				# if = {
					# limit = {
						# ai = no
					# }
					# set_character_flag = achievement_dragon_murdered
				# }
			# }
		# }
	# }
# }

# plot_steal_valyrian_sword = {
	# type = realm_characters_plus
	# intrigue_plot = yes
	
	# # Plotter scope
	# potential = {
		# prisoner = no
		# age = 16
		# has_ambition = obj_obtain_valyrian_sword
		# NOT = { trait = incapable }
		# NOT = { trait = imbecile }
		# NOT = {
			# AND = {
				# ai = yes
				# trait = honest
			# }
		# }
		# NOT = {
			# AND = {
				# ai = yes
				# trait = kind
			# }
		# }
		# NOT = {
			# AND = {
				# ai = yes
				# trait = honorable
			# }
		# }
		# NOT = {
			# AND = {
				# ai = yes
				# trait = content
			# }
		# }
	# } 
	
	# # Target character scope
	# allow = {		
		# OR = {
			# trait = valyrian_steel
			# trait = blackfyre
			# trait = darksister
			# trait = longclaw
			# trait = longclaw_snow
			# trait = ice
			# trait = brightroar
			# trait = heartsbane
			# trait = nightfall
			# trait = ladyforlorn
			# trait = redrain
			# trait = widowswail
			# trait = oathkeeper
		# }
	# }
	
	# chance = {
		# factor = 10
		
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 100 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 90 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 80 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 70 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 60 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 50 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 40 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 30 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 20 }
		# }
		# modifier = {
			# factor = 0.8
			# reverse_opinion = { who = FROM value = 10 }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -9 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -19 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -29 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -39 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -49 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -59 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -69 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -79 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -89 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { reverse_opinion = { who = FROM value = -99 } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { trait = just }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { 
				# OR = {
					# trait = dishonorable1
					# trait = dishonorable2
					# trait = dishonorable3
					# trait = dishonorable4
					# trait = dishonorable5
					# trait = dishonorable6
					# trait = dishonorable7
					# trait = dishonorable8
					# trait = dishonorable9
					# trait = dishonorable10
				# }
			# }
		# }	
		# modifier = {
			# factor = 1.5
			# FROM = { trait = ruthless }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { trait = deceitful }
		# }
		# modifier = {
			# factor = 3
			# FROM = { trait = envious }
		# }
		# modifier = {
			# factor = 3
			# FROM = { trait = greedy }
		# }
		# modifier = {
			# factor = 3
			# FROM = { trait = selfish }
		# }
	# }
	
	# success = {
		# is_alive = no
		# hidden_tooltip = {
			# FROM = { has_character_flag = stealing_valyrian_sword }
		# }
	# }
	# abort = {
		# is_alive = no
	# }
	# abort_effect = {
		# FROM = { clr_character_flag = stealing_valyrian_sword }
	# }
	# effect = {
		# FROM = {
			# clr_character_flag = stealing_valyrian_sword
			# # Achievement
			# hidden_tooltip = {
				# if = {
					# limit = {
						# ai = no
					# }
					# set_character_flag = achievement_valyrian_sword_stolen
				# }
			# }
		# }
	# }
# }

# plot_gain_iron_throne = {
	# type = realm_titles
	# military_plot = yes
	
	# potential = {
		# prisoner = no
		# age = 16
		# NOT = { trait = incapable }
		# liege = { has_landed_title = e_iron_throne }
		
		# # These would cause all kinds of problems
		# NOT = { trait = kingsguard }
		# NOT = { trait = wildling }
		# NOT = { trait = nightswatch }
		# NOT = { trait = maester }
		# NOT = { trait = archmaester }
		# NOT = { trait = turncloak }

		# OR = {
			# ai = no
			# NOT = { has_character_flag = plot_cooldown }
			# had_character_flag = {
				# flag = plot_cooldown
				# days = 3650
			# }
		# }
	# }
	
	# allow = {
		# title = e_iron_throne
		
		# # Must not be married to the current occupant
		# # or BE the current occupant
		# holder_scope = {
			# NOT = { character = FROM }
			# NOT = { spouse = { character = FROM } }
			# NOT = { reverse_has_truce = FROM  }
		# }
		
		# # One of the following must be true:
		# # - Has a legitimate claim to the Iron Throne
		# # - Is Regent to the Iron Throne (and either Envious, Ambitious, Arbitrary, or Proud)
		# # - Is an extremely powerful vassal to the Iron Throne (and either Envious, Ambitious, Arbitrary or Proud)
		# OR = {
			# FROM = { has_strong_claim = PREV }
			# FROM = { has_weak_claim = PREV }
			# holder_scope = {
				# any_vassal = {
					# character = FROM
					# OR = {
						# liege = { regent = { character = PREVPREV } }
						# num_of_king_titles = 3
					# }
					# OR = {
						# trait = envious
						# trait = ambitious
						# trait = arbitrary
						# trait = proud
					# }
					# demesne_size = 1
				# }
			# }
		# }
		
		# # If the character is Just, the current holder of the throne's claim must be questionable,
		# # or they must have shown that they do not care about the law
		# OR = {
			# FROM = { NOT = { trait = just } }
			# holder_scope = { has_character_modifier = suspected_bastard }
			# holder_scope = { trait = bastard }
			# holder_scope = {
				# trait = legit_bastard
				# FROM = {
					# NOT = { trait = bastard }
					# NOT = { has_character_modifier = suspected_bastard }
				# }
			# }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_usurped_title } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = good_succ_law_change } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = bad_succ_law_change } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = succ_law_change } }
			# AND = {
				# has_law = agnatic_succession
				# holder_scope = { is_female = yes }
				# FROM = { is_female = no }
			# }
			# AND = {
				# has_law = cognatic_succession
				# holder_scope = {
					# is_female = yes
					# any_sibling = {
						# is_female = no
						# character = FROM
					# }
				# }
			# }
			# AND = {
				# holder_scope = {
					# NOT = { dynasty = 496 }
				# }
				# FROM = {
					# dynasty = 496
				# }
			# }
		# }
		# # Additionally, the character must have a valid claim and not be a child of the current occupant
		# OR = {
			# FROM = { NOT = { trait = just } }
			# FROM = { has_weak_claim = ROOT }
			# FROM = { has_strong_claim = ROOT }
		# }
		# OR = {
			# NOT = { FROM = { trait = just } }
			# holder_scope = { any_child = { character = FROM } }
		# }
		
		# # If the character is Honorable, they must really hate the target for other reasons
		# OR = {
			# NOT = { FROM = { trait = honorable } }
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		# }
	# }
	
	# chance = { # The AI should REALLY like this plot by default
		# factor = 300
		
		# # Personality Effects
		# modifier = {
			# factor = 5
			# FROM = { trait = ambitious }
		# }
		# modifier = {
			# factor = 2
			# FROM = { trait = proud }
		# }
		# modifier = {
			# factor = 0.2
			# FROM = { trait = content }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { trait = humble }
		# }
		# modifier = {
			# factor = 2
			# FROM = { trait = envious }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { trait = kind }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { trait = greedy }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { trait = deceitful }
		# }
		# modifier = {
			# factor = 0.8
			# FROM = { trait = honest }
		# }
		
		# # The current heir is much less likely to do this plot
		# modifier = {
			# factor = 0.5
			# current_heir = { character = FROM }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { trait = patient }
			# current_heir = { character = FROM }
		# }
		
		# # Less likely to pick this objective if not landed
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { higher_tier_than = DUKE } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { higher_tier_than = COUNT } }
		# }
		
		# # More likely to pick this objective if friends with a powerful lord
		# modifier = {
			# factor = 2
			# holder_scope = {
				# any_realm_lord = {
					# opinion = { who = FROM value = 100 }
					# primary_title = {
						# higher_tier_than = DUKE
						# NOT = { title = e_iron_throne }
					# }
				# }
			# }
		# }
		# modifier = {
			# factor = 2
			# holder_scope = {
				# any_realm_lord = {
					# opinion = { who = FROM value = 100 }
					# primary_title = {
						# higher_tier_than = COUNT
						# NOT = { title = e_iron_throne }
					# }
				# }
			# }
		# }
		
		# # MUCH more likely to pick this objective if friends with a Lord Paramount
		# # who has a negative opinion of the king
		# modifier = {
			# factor = 5
			# holder_scope = {
				# any_realm_lord = {
					# opinion = { who = FROM value = 100 }
					# NOT = { opinion = { who = PREV value = 0 } }
					# primary_title = { tier = KING }
				# }
			# }
		# }
		
		# # Also much more likely to pick this objective if a lord paramount who has a
		# # negative opinion of the king
		# modifier = {
			# factor = 5
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = 0 } } }
			# FROM = { primary_title = { tier = KING } }
		# }
		
		# # Obviously, chance of picking this title also depends on personal opinion of the king
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 90 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 70 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 50 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 30 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 10 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -9 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -29 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -69 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -89 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		# }
		
		# # Zealous character bonus chance vs. infidels
		# modifier = {
			# factor = 2
			# FROM = { trait = zealous }
			# holder_scope = { NOT = { religion_group = FROM } }
		# }
		
		# # If a Just character is eligible for this plot at all, they should be much more
		# # likely to take it
		# modifier = {
			# factor = 10
			# FROM = { trait = just }
		# }
	# }
	
	# success = { FROM = { has_landed_title = e_iron_throne } }
	
	# abort = {
		# OR = {
			# FROM = { prisoner = yes }
			# FROM = { has_character_flag = abort_plot }
			# holder_scope = {
				# spouse = { character = FROM }
			# }
		# }
	# }
	# abort_effect = {
		# FROM = {
			# # Clear flags
			# hidden_tooltip = {
				# clr_character_flag = plot_gain_iron_throne_ultimatum_decision_taken
				# clr_character_flag = abort_plot
				# clr_character_flag = plot_check
				# set_character_flag = plot_cooldown
				# any_plot_backer = { clr_character_flag = plot_gain_iron_throne_ultimatum_patron_decision_taken }
			# }
		# }
	# }
	# effect = {
		# FROM = {
			# prestige = 100
			# # Clear flags
			# hidden_tooltip = {
				# clr_character_flag = plot_gain_iron_throne_ultimatum_decision_taken
				# any_plot_backer = { clr_character_flag = plot_gain_iron_throne_ultimatum_patron_decision_taken }
			# }
		# }
	# }
# }

# plot_gain_iron_throne_spouse = {
	# type = realm_titles
	# military_plot = yes
	
	# potential = {
		# prisoner = no
		# age = 16
		# demesne_size = 1
		# NOT = { trait = incapable }
		# liege = { has_landed_title = e_iron_throne }
		
		# # These would cause all kinds of problems
		# spouse = {
			# NOT = { trait = kingsguard }
			# NOT = { trait = wildling }
			# NOT = { trait = nightswatch }
			# NOT = { trait = maester }
			# NOT = { trait = archmaester }
			# NOT = { trait = turncloak }
		# }

		# OR = {
			# ai = no
			# NOT = { has_character_flag = plot_cooldown }
			# had_character_flag = {
				# flag = plot_cooldown
				# days = 3650
			# }
		# }
		
		# # Spouse must be landless and in plotter's court
		# spouse = {
			# NOT = { demesne_size = 1 }
			# liege = { character = ROOT }
		# }
	# }
	
	# allow = {
		# title = e_iron_throne
		
		# # Must not be married to the current occupant
		# # or BE the current occupant
		# holder_scope = {
			# NOT = { character = FROM }
			# NOT = { spouse = { character = FROM } }
			# NOT = { reverse_has_truce = FROM  }
		# }
		
		# # Spouse must have a legitimate claim to the Iron Throne
		# FROM = {
			# spouse = {
				# OR = {
					# has_strong_claim = PREVPREV
					# has_weak_claim = PREVPREV
				# }
			# }
		# }
		
		# # If the character is Just, the current holder of the throne's claim must be questionable
		# OR = {
			# FROM = { NOT = { trait = just } }
			# holder_scope = { has_character_modifier = suspected_bastard }
			# holder_scope = { trait = bastard }
			# holder_scope = {
				# trait = legit_bastard
				# FROM = {
					# spouse = {
						# NOT = { trait = bastard }
						# NOT = { has_character_modifier = suspected_bastard }
					# }
				# }
			# }
			# holder_scope = { FROM = { spouse = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = good_succ_law_change } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = bad_succ_law_change } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = succ_law_change } }
			# AND = {
				# has_law = agnatic_succession
				# holder_scope = { is_female = yes }
				# FROM = { spouse = { is_female = no } }
			# }
			# AND = {
				# has_law = cognatic_succession
				# holder_scope = {
					# is_female = yes
					# any_sibling = {
						# is_female = no
						# spouse = { character = FROM }
					# }
				# }
			# }
			# AND = {
				# holder_scope = {
					# NOT = { dynasty = 496 }
				# }
				# FROM = {
					# spouse = {
						# dynasty = 496
					# }
				# }
			# }
		# }
		
		# # If the character is Honorable, they must really hate the target for other reasons
		# OR = {
			# NOT = { FROM = { trait = honorable } }
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		# }
	# }
	
	# chance = { # The AI should REALLY like this plot by default
		# factor = 200
		
		# # Personality Effects
		# modifier = {
			# factor = 5
			# FROM = { trait = ambitious }
		# }
		# modifier = {
			# factor = 2
			# FROM = { trait = proud }
		# }
		# modifier = {
			# factor = 0.2
			# FROM = { trait = content }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { trait = humble }
		# }
		
		# # The current heir is much less likely to do this plot
		# modifier = {
			# factor = 0.5
			# current_heir = { character = FROM }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { trait = patient }
			# current_heir = { character = FROM }
		# }
		
		# # Less likely to pick this objective if not landed
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { higher_tier_than = DUKE } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { higher_tier_than = COUNT } }
		# }
		
		# # More likely to pick this objective if friends with a powerful lord
		# modifier = {
			# factor = 2
			# holder_scope = {
				# any_realm_lord = {
					# opinion = { who = FROM value = 100 }
					# primary_title = {
						# higher_tier_than = DUKE
						# NOT = { title = e_iron_throne }
					# }
				# }
			# }
		# }
		# modifier = {
			# factor = 2
			# holder_scope = {
				# any_realm_lord = {
					# opinion = { who = FROM value = 100 }
					# primary_title = {
						# higher_tier_than = COUNT
						# NOT = { title = e_iron_throne }
					# }
				# }
			# }
		# }
		
		# # MUCH more likely to pick this objective if friends with a Lord Paramount
		# # who has a negative opinion of the king
		# modifier = {
			# factor = 5
			# holder_scope = {
				# any_realm_lord = {
					# opinion = { who = FROM value = 100 }
					# NOT = { opinion = { who = PREV value = 0 } }
					# primary_title = { tier = KING }
				# }
			# }
		# }
		
		# # Also much more likely to pick this objective if a lord paramount who has a
		# # negative opinion of the king
		# modifier = {
			# factor = 5
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = 0 } } }
			# FROM = { primary_title = { tier = KING } }
		# }
		
		# # Obviously, chance of picking this title also depends on personal opinion of the king
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 90 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 70 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 50 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 30 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		# }
		# modifier = {
			# factor = 0.8
			# holder_scope = { reverse_opinion = { who = FROM value = 10 } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -9 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -29 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -69 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -89 } } }
		# }
		# modifier = {
			# factor = 1.25
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		# }
		
		# # And of spouse
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 100 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 90 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 80 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 70 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 60 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 50 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 40 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 30 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 20 } } }
		# }
		# modifier = {
			# factor = 1.25
			# FROM = { spouse = { reverse_opinion = { who = FROM value = 10 } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -9 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -19 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -29 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -39 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -49 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -59 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -69 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -79 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -89 } } } }
		# }
		# modifier = {
			# factor = 0.8
			# NOT = { FROM = { spouse = { reverse_opinion = { who = FROM value = -99 } } } }
		# }
		
		# # If a Just character is eligible for this plot at all, they should be much more
		# # likely to take it
		# modifier = {
			# factor = 10
			# FROM = { trait = just }
		# }
	# }
	
	# success = { holder_scope = { spouse = { character = FROM } } }
	
	# abort = {
		# OR = {
			# FROM = { prisoner = yes }
			# FROM = { has_character_flag = abort_plot }
			# FROM = { spouse = { is_alive = no } }
		# }
	# }
	# abort_effect = {
		# FROM = {
			# # Clear flags
			# hidden_tooltip = {
				# clr_character_flag = plot_gain_iron_throne_spouse_ultimatum_decision_taken
				# clr_character_flag = abort_plot
				# clr_character_flag = plot_check
				# set_character_flag = plot_cooldown
			# }
		# }
	# }
	# effect = {
		# FROM = {
			# prestige = 100
			# hidden_tooltip = { clr_character_flag = plot_gain_iron_throne_spouse_ultimatum_decision_taken }
		# }
	# }
# }

# # Gain one of the liege's landed titles
# plot_gain_title = {
	# type = liege_titles
	# military_plot = yes
	
	# # Plotter scope
	# potential = {
		# always = no # Disabled for being too similar to the factions
		
		# prisoner = no
		# age = 16
		# is_ruler = yes
		# independent = no
		# is_landed = yes
		# higher_tier_than = BARON
		# NOT = { trait = incapable }

		# OR = {
			# ai = no
			# NOT = { has_character_flag = plot_cooldown }
			# had_character_flag = {
				# flag = plot_cooldown
				# days = 3650
			# }
		# }
		
		# # # These would cause all kinds of problems
		# NOT = { trait = kingsguard }
		# NOT = { trait = nightswatch }
		# NOT = { trait = maester }
		# NOT = { trait = archmaester }
	# }
	
	# # Target scope
	# allow = {
		# # The Iron Throne gets its own plot
		# NOT = { title = e_iron_throne }
		# #not agnatic if female
		# OR = {
			# FROM = { is_female = no }
			# NOT = { has_law = agnatic_succession }
		# }
		# # No barony titles
		# higher_tier_than = BARON
		# is_primary_type_title = no
		# controls_religion = no
		# mercenary = no
		# holder_scope = {
			# NOT = { spouse = { character = FROM } }
			# NOT = { reverse_has_truce = FROM  }
		# }
		# OR = {
			# FROM = { is_feudal = yes }
			# AND = {
				# FROM = { is_feudal = no }
				# lower_tier_than = KING
			# }
		# }
		# OR = {
			# AND = {
				# is_primary_holder_title = yes
				# tier = EMPEROR
				# OR = {
					# FROM = { num_of_duke_titles = 4 }
					# FROM = { num_of_king_titles = 1 }
					# FROM = { prestige = 1000 }
				# }
			# }
			# AND = {
				# is_primary_holder_title = yes
				# tier = KING
				# OR = {
					# FROM = { num_of_duke_titles = 3 }
					# FROM = { prestige = 500 }
				# }
			# }
			# AND = {
				# is_primary_holder_title = yes
				# tier = DUKE
				# OR = {
					# FROM = { num_of_count_titles = 2 }
					# FROM = { prestige = 250 }
				# }
			# }
			# claimed_by = FROM
			# AND = {
				# FROM = {
					# any_pretender_title = {
						# title = PREVPREV
					# }
				# }
				# NOT = { has_law = succ_feudal_elective }
			# }
			# has_de_jure_pretension = FROM
		# }
		
		# # If the character is Just, the current holder's claim must be questionable
		# OR = {
			# FROM = { NOT = { trait = just } }
			# holder_scope = { has_character_modifier = suspected_bastard }
			# holder_scope = { trait = bastard }
			# holder_scope = {
				# trait = legit_bastard
				# FROM = {
					# NOT = { trait = bastard }
					# NOT = { has_character_modifier = suspected_bastard }
				# }
			# }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_usurped_title } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = good_succ_law_change } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = bad_succ_law_change } }
			# holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = succ_law_change } }
			# AND = {
				# has_law = agnatic_succession
				# holder_scope = { is_female = yes }
				# FROM = { is_female = no }
			# }
			# AND = {
				# has_law = cognatic_succession
				# holder_scope = {
					# is_female = yes
					# any_sibling = {
						# is_female = no
						# character = FROM
					# }
				# }
			# }
		# }
		
		# # If the character is Honorable, they must really hate the target for other reasons
		# OR = {
			# NOT = { FROM = { trait = honorable } }
			# NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		# }
	# }
	
	# chance = {
		# factor = 10
		
		# # If you can claim the primary title,
		# # don't bother trying to claim minor ones
		# modifier = {
			# factor = 0
			# is_primary_holder_title = no
			# holder_scope = {
				# primary_title = {
					# OR = {
						# FROM = { is_female = no }
						# NOT = { has_law = agnatic_succession }
					# }
					# higher_tier_than = BARON
					# is_primary_type_title = no
					# controls_religion = no
					# mercenary = no
					# holder_scope = {
						# NOT = { spouse = { character = FROM } }
						# NOT = { reverse_has_truce = FROM  }
					# }
					# OR = {
						# FROM = { is_feudal = yes }
						# AND = {
							# FROM = { is_feudal = no }
							# lower_tier_than = KING
						# }
					# }
					# OR = {
						# AND = {
							# tier = EMPEROR
							# OR = {
								# FROM = { num_of_duke_titles = 4 }
								# FROM = { num_of_king_titles = 1 }
								# FROM = { prestige = 1000 }
							# }
						# }
						# AND = {
							# tier = KING
							# OR = {
								# FROM = { num_of_duke_titles = 3 }
								# FROM = { prestige = 500 }
							# }
						# }
						# AND = {
							# tier = DUKE
							# OR = {
								# FROM = { num_of_count_titles = 2 }
								# FROM = { prestige = 250 }
							# }
						# }
						# claimed_by = FROM
						# AND = {
							# FROM = {
								# any_pretender_title = {
									# title = PREVPREV
								# }
							# }
							# NOT = { has_law = succ_feudal_elective }
						# }
						# has_de_jure_pretension = FROM
					# }
				# }
			# }
		# }

		# modifier = {
			# factor = 0.0
			# FROM = {
				# ai = yes
				# war = yes
			# }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { liege = { dynasty = FROM } }
		# }
		# modifier = {
			# factor = 0
			# FROM = { trait = content }
		# }
		# modifier = {
			# factor = 0.2
			# FROM = { is_dumb_trigger = yes }
		# }
		# modifier = {
			# factor = 0.2
			# FROM = { trait = kind }
		# }
		# modifier = {
			# factor = 0
			# FROM = { opinion = { who = liege value = 25 } }
		# }
		# modifier = {
			# factor = 0.25
			# FROM = { opinion = { who = liege value = 0 } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { relative_power_to_liege = 0.10 } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { relative_power_to_liege = 0.20 } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { relative_power_to_liege = 0.30 } }
		# }
		# modifier = {
			# factor = 0.5
			# FROM = { NOT = { relative_power_to_liege = 0.40 } }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { relative_power_to_liege = 0.5 }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { relative_power_to_liege = 0.75 }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { relative_power_to_liege = 1.0 }
		# }
		# modifier = {
			# factor = 1.5
			# NOT = { FROM = { opinion = { who = liege value = -25 } } }
		# }
		# modifier = {
			# factor = 1.5
			# NOT = { FROM = { opinion = { who = liege value = -50 } } }
		# }
		# modifier = {
			# factor = 1.5
			# NOT = { FROM = { opinion = { who = liege value = -75 } } }
		# }
		# modifier = {
			# factor = 0.25
			# FROM = { NOT = { intrigue = 5 } }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { intrigue = 10 }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { intrigue = 15 }
		# }
		# modifier = {
			# factor = 1.5
			# FROM = { intrigue = 20 }
		# }
		# modifier = {
			# factor = 2.0
			# FROM = { trait = envious }
		# }
		# modifier = {
			# factor = 4.0
			# FROM = { trait = ambitious }
		# }
		
		# # This becomes much more pressing if the current occupant follows a
		# # different religion or belongs to a different culture group than is
		# # "typical" for the region (looking at you here, Ser Robb Stark)
		# modifier = {
			# factor = 5
			# holder_scope = {
				# capital_scope = {
					# NOT = { religion = PREV }
					# FROM = {
						# capital_scope = { religion = PREVPREV }
						# religion = PREV
					# }
				# }
			# }
		# }
		# modifier = {
			# factor = 5
			# holder_scope = {
				# capital_scope = {
					# NOT = { culture_group = PREV }
					# FROM = {
						# capital_scope = { culture_group = PREVPREV }
						# culture_group = PREV
					# }
				# }
			# }
		# }
	# }
	
	# success = {
		# holder = FROM
	# }
	
	# abort = {
		# OR = {
			# FROM = { prisoner = yes }
			# FROM = { has_character_flag = abort_plot }
			# holder_scope = {
				# spouse = { character = FROM }
			# }
			# FROM = {
				# OR = {
					# is_ruler = no
					# independent = yes
					# trait = incapable
				# }
			# }
		# }
	# }
	# abort_effect = {
		# FROM = {
			# # Clear flags
			# hidden_tooltip = {
				# clr_character_flag = event7040
				# clr_character_flag = plot_gain_title_decision_taken
				# clr_character_flag = abort_plot
				# clr_character_flag = plot_check
				# set_character_flag = plot_cooldown
			# }
		# }
	# }
	# effect = {
		# FROM = {
			# any_plot_backer = {
				# reverse_opinion = {
					# modifier = opinion_grateful
					# who = FROM
					# years = 5
				# }
			# }
			# # Clear flags
			# hidden_tooltip = {
				# clr_character_flag = event7040
				# clr_character_flag = plot_gain_title_decision_taken
				# clr_character_flag = abort_plot
				# clr_character_flag = plot_check
				# set_character_flag = plot_cooldown
			# }
		# }
	# }
# }

plot_investigate_legitimacy = {
	type = realm_characters_plus
	intrigue_plot = yes
	
	potential = {
		age = 16
		prisoner = no
		NOT = { trait = incapable }
		NOT = { trait = nightswatch }
		NOT = { trait = wildling }
		NOT = { culture = dothraki } # No concept of illegitimacy anyway
		NOT = { trait = dragon }
		NOT = { trait = slave }
		NOT = { trait = wikid }	
		OR = { #Word must carry some weight
			higher_tier_than = BARON
			liege = { 
				is_close_relative = ROOT 
				higher_tier_than = BARON
			}
			prestige = 500
			trait = dragon_rider
			AND = {
				NOT = { dynasty = 0 }
				OR = {
					is_voter = yes
					is_councillor = yes
				}	
				liege = { higher_tier_than = COUNT }
			}	
			trait = archmaester
			trait = kingsguard
			liege = { regent = { character = PREVPREV } }
		}
	}
	
	target_potential = {
		# Must not be a bastard already
		NOT = { trait = bastard }
		
		NOT = { culture_group = unoccupied_group }
		NOT = { trait = dragon }
		father_even_if_dead = { always = yes }
		NOT = { dynasty = 0 }
		
		#Once publicly accused cannot be targeted again
		NOT = { has_character_modifier = suspected_bastard }
		
		FROM = { #Player plotter must either...
			OR = {
				AND = { #Be a councillor in court of the target/father
					OR = {
						is_councillor = yes
						is_voter = yes
						liege = { 
							has_regent = yes
							regent = { character = PREVPREV } 
						}
					}	
					OR = {
						liege = { character = PREVPREV }
						ROOT = { 
							father = { 
								is_alive = yes
								OR = {
									is_liege_of = PREVPREV 
									same_liege = PREVPREV
								}	
							} 
						}
						same_liege = ROOT					
					}
				}
				AND = { #Discrediting target can advance my claims
					OR = {
						trait = ambitious
						trait = envious
						trait = greedy
					}
					NOT = { trait = content }
					NOT = { trait = honorable }
					OR = {
						any_demesne_title = { claimed_by = ROOT }
						any_claim = { holder_scope = { character = ROOT } }
						any_pretender_title = { 
							OR = {
								holder_scope = { character = ROOT } 
								current_heir = { character = ROOT }
							}	
						}
					}
				}
				AND = { #I'm in the claimant faction
					in_faction = faction_claimant
					NOT = { trait = honest }
					NOT = { trait = honorable }
					liege = { character = ROOT }
				}
				AND = { #I'm crazy
					trait = lunatic
					is_abroad = no
					at_location = ROOT
				}
			}	
		}
	}
	
	player_allow = {	
		NOT = { trait = legit_bastard }
		NOT = { trait = adopted }
		NOT = { trait = kingsguard }
		NOT = { trait = nightswatch }
		NOT = { trait = maester }
		NOT = { trait = archmaester }
		NOT = { age = 25 } #Cannot have happened too long ago
		is_priest = no
		is_theocracy = no
		is_republic = no
		is_within_diplo_range = FROM
				
		# Must actually be in line to inherit a title
		OR = {
			higher_tier_than = COUNT
			any_heir_title = { higher_tier_than = COUNT }
			any_pretender_title = { higher_tier_than = COUNT }
		}
		
		# Both already know the truth of their child's identity
		NOT = { mother = { character = FROM } }
		NOT = { real_father = { character = FROM } }
		
		# Descendants of this character probably don't WANT to know
		NOT = { 
			any_child = { 
				OR = {
					character = FROM 
					any_child = { character = FROM }
				}	
			} 
		}
			
		# Prevented for balance reasons, for now
		NOT = { father = { character = FROM } }	
	}
	
	allow = {
		NOT = { trait = legit_bastard }
		NOT = { trait = adopted }
		NOT = { trait = kingsguard }
		NOT = { trait = nightswatch }
		NOT = { trait = maester }
		NOT = { trait = archmaester }
		NOT = { age = 25 } #Cannot have happened too long ago
		is_priest = no
		is_theocracy = no
		is_republic = no
		is_within_diplo_range = FROM
		
		# Must actually be in line to inherit a title
		OR = {
			higher_tier_than = COUNT
			any_heir_title = { higher_tier_than = COUNT }
			any_pretender_title = { higher_tier_than = COUNT }
		}
		
		# Both already know the truth of their child's identity
		NOT = { mother = { character = FROM } }
		NOT = { real_father = { character = FROM } }
		
		# Descendants of this character probably don't WANT to know
		NOT = { 
			any_child = { 
				OR = {
					character = FROM 
					any_child = { character = FROM }
				}	
			} 
		}
			
		# Prevented for balance reasons, for now
		NOT = { father = { character = FROM } }
	}
	
	chance = {
		factor = 1
		
		# Reasons to use plot
		modifier = {
			factor = 0	
			OR = { #Target is actually a secret bastard, and FROM has a hunch
				NOT = { has_character_flag = flag_secret_bastard } 
				FROM = {
					NOT = {
						OR = {
							trait = greensight
							trait = genius
							trait = quick
							intrigue = 12
							ROOT = { father_even_if_dead = { NOT = { graphical_culture = ROOT } } }
							ROOT = { mother = { any_lover = { graphical_culture = ROOT } } }
						}
					}
				}
			}
			mother_even_if_dead = { #I'm paranoid and dont trust mother
				OR = {
					is_alive = no
					reverse_opinion = { who = FROM value = 0 }
					FROM = { NOT = { trait = paranoid } }
					NOT = {
						OR = {
							trait = lustful
							trait = hedonist
							trait = deceitful
							has_lover = yes
							any_child = { trait = bastard }
						}
					}
				}
			}			
			OR = { #Reasons to make it up
				AND = {
					reverse_opinion = { who = FROM value = -50 } #I dislike the target	
					mother_even_if_dead = { #I dislike the mother
						OR = {
							is_alive = no
							reverse_opinion = { who = FROM value = -50 }
						}	
					}					
				}	
				regent = { character = FROM } #Target's regent wont make stuff up
				FROM = { #Must not have one of these
					OR = {
						trait = honorable
						trait = content
						trait = just
						trait = honest
					}
				}	
				FROM = { #Must have one of these
					AND = { 
						NOT = { trait = deceitful }
						NOT = { trait = ruthless }
						NOT = { trait = ambitious }
						NOT = { trait = arbitrary }
					}
				}	
			}	
			FROM = { NOT = { trait = lunatic } } #I'm crazy
			FROM = { #I stand to gain	
				OR = { 		
					NOT = {
						OR = {
							any_pretender_title = { 
								OR = {
									current_heir = { character = ROOT }
									holder_scope = { character = ROOT } 
								}	
							}
							any_demesne_title = { claimed_by = ROOT }	
							any_claim = { holder_scope = { character = ROOT } }							
						}
					}	
					trait = content
					trait = honorable
				} 						
			}	
		}
		
		#Prioritise heirs and rulers before other siblings
		modifier = {
			factor = 0
			is_ruler = no
			is_primary_heir = no
			any_sibling = {
				mother_even_if_dead = { any_child = { character = PREVPREVPREV } }
				father_even_if_dead = { any_child = { character = PREVPREVPREV } }
				OR = {
					is_ruler = yes
					is_primary_heir = yes
				}
			}
		}
		
		# Parents of the mother usually wont want to jeapordise her safety
		modifier = {
			factor = 0			
			mother_even_if_dead = { is_child_of = FROM }
			OR = {
				NOT = { has_character_flag = flag_secret_bastard }
				FROM = { NOT = { trait = just } }
			}
		}
		
		# Hunches
		modifier = {
			factor = 4
			has_character_flag = flag_secret_bastard
			FROM = { trait = greensight }
		}
		modifier = {
			factor = 4
			has_character_flag = flag_secret_bastard
			FROM = { trait = genius }
		}
		modifier = {
			factor = 2
			has_character_flag = flag_secret_bastard
			FROM = { trait = quick }
		}
		modifier = {
			factor = 2
			has_character_flag = flag_secret_bastard
			FROM = { intrigue = 12 }
		}
		modifier = {
			factor = 1.5
			has_character_flag = flag_secret_bastard
			father_even_if_dead = { NOT = { graphical_culture = ROOT } }
		}
		modifier = {
			factor = 1.5
			has_character_flag = flag_secret_bastard
			mother = { any_lover = { graphical_culture = ROOT } }
		}
		modifier = {
			factor = 2
			has_character_flag = flag_secret_bastard
			father_even_if_dead = { NOT = { graphical_culture = ROOT } }
			mother = { NOT = { graphical_culture = ROOT } }
		}		
		modifier = { #Just character with a hunch will be eager to invesitgate a la Ned Stark
			factor = 5
			FROM = { trait = just }
			has_character_flag = flag_secret_bastard
			OR = {
				father_even_if_dead = { NOT = { graphical_culture = ROOT } }
				mother = { any_lover = { graphical_culture = ROOT } }
				FROM = {
					OR = {
						trait = greensight
						trait = genius
						trait = quick
						intrigue = 12
					}
				}	
			}	
		}	
		
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 20 }	
			OR = {
				NOT = { has_character_flag = flag_secret_bastard }
				FROM = { NOT = { trait = just } }
			}
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }			
			}
		}
		modifier = {
			factor = 0
			FROM = {
				is_close_relative = ROOT
				OR = {
					opinion = { who = ROOT value = 15 }
					trait = familyperson
				}
				NOT = { trait = ruthless }
			}
		}
		modifier = {
			factor = 0.2
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 0.66
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			reverse_opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 0.56
			reverse_opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.64
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.56
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.68
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 2.32
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			FROM = { is_foe = ROOT }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			NOT = { religion = FROM }
		}
	
		# Personality Effects
		modifier = {
			factor = 2
			FROM = { trait = diligent }
		}
		modifier = {
			factor = 0.25
			FROM = { trait = slothful }
		}
		modifier = {
			factor = 2
			FROM = { trait = paranoid }
		}
		modifier = {
			factor = 0.25
			FROM = { trait = trusting }
		}
			
		# Target's mother's personality effects
		modifier = {
			factor = 2
			mother_even_if_dead = { trait = lustful }
		}
		modifier = {
			factor = 0.5
			mother_even_if_dead = { trait = chaste }
		}
		modifier = {
			factor = 2
			mother_even_if_dead = { trait = deceitful }
		}
		modifier = {
			factor = 0.5
			mother_even_if_dead = { trait = honest }
		}
		modifier = {
			factor = 2
			mother_even_if_dead = { trait = ruthless }
		}
		modifier = {
			factor = 0.5
			mother_even_if_dead = { trait = honorable }
		}
		modifier = {
			factor = 2
			mother_even_if_dead = { trait = arbitrary }
		}
		modifier = {
			factor = 0.5
			mother_even_if_dead = { trait = just }
		}
		
		# Stands something to gain
		modifier = {
			factor = 3
			FROM = {
				NOT = { trait = content }
				NOT = { trait = honorable }
				any_pretender_title = { 
					OR = {
						current_heir = { character = ROOT }
						holder_scope = { character = ROOT } 
					}
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				NOT = { trait = content }
				NOT = { trait = honorable }
				OR = {
					trait = ambitious
					trait = envious
					trait = greedy
				}
				any_pretender_title = { 
					OR = {
						current_heir = { character = ROOT }
						holder_scope = { character = ROOT } 
					}
				}
			}
		}
		modifier = {
			factor = 3
			FROM = {
				NOT = { trait = content }
				NOT = { trait = honorable }
				OR = {
					any_demesne_title = { claimed_by = ROOT }	
					any_claim = { holder_scope = { character = ROOT } }							
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				NOT = { trait = content }
				NOT = { trait = honorable }
				OR = {
					trait = ambitious
					trait = envious
					trait = greedy
				}
				OR = {
					any_demesne_title = { claimed_by = ROOT }	
					any_claim = { holder_scope = { character = ROOT } }							
				}
			}
		}
		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			is_vassal_or_below = FROM
			has_character_modifier = feared_1
		}
		modifier = {
			factor = 0.5
			is_vassal_or_below = FROM
			has_character_modifier = feared_2
		}
		modifier = {
			factor = 0.3
			is_vassal_or_below = FROM
			has_character_modifier = feared_3
		}
		modifier = {
			factor = 0.2
			is_vassal_or_below = FROM
			has_character_modifier = feared_4
		}
		modifier = {
			factor = 0.1
			is_vassal_or_below = FROM
			has_character_modifier = feared_5
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
			is_vassal_or_below = FROM
			OR = {
				has_character_modifier = feared_1
				has_character_modifier = feared_2
				has_character_modifier = feared_3
				has_character_modifier = feared_4
				has_character_modifier = feared_5 
			}	
		}
	}
	
	abort = {
		OR = {
			FROM = {
				OR = {
					prisoner = yes
					trait = incapable
					has_character_flag = abort_plot
					has_character_flag = flag_plot_fail
				}
			}	
			trait = kingsguard
			trait = nightswatch
			trait = maester
			trait = archmaester
			trait = drowned
			trait = red_priest
			is_theocracy = yes
			has_character_modifier = suspected_bastard
		}	
	}
	
	abort_effect = {
		FROM = {
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			
			# Clear Evidence Flags
			clr_character_flag = flag_pil_evidence_appearance
			clr_character_flag = flag_pil_evidence_trait_present
			clr_character_flag = flag_pil_evidence_trait_missing
			clr_character_flag = flag_pil_evidence_mysterious_conception
			clr_character_flag = flag_pil_evidence_mysterious_conception_fake
			clr_character_flag = flag_pil_evidence_mother_lover
			clr_character_flag = flag_pil_evidence_green_dreams
			clr_character_flag = flag_pil_evidence_green_dreams_fake
			clr_character_flag = flag_pil_evidence_vision_in_flames
			clr_character_flag = flag_pil_evidence_vision_in_flames_fake
			clr_character_flag = flag_pil_evidence_siblings_implicated_NO
			clr_character_flag = flag_pil_evidence_siblings_implicated
			
			
			set_variable = { which = "pil_evidence_count" value = 0 }
			
			# Clear decision flags
			clr_character_flag = flag_pil_confront_father
			clr_character_flag = flag_pil_send_ravens
			clr_character_flag = flag_pil_evidence_count_set
			clr_character_flag = flag_pil_regent_sieze_throne
		}
		hidden_tooltip = { any_sibling = { reverse_remove_opinion = { who = FROM modifier = opinion_implicated_sibling } } } 
	}
	
	success = {
		OR = {
			trait = bastard
			trait = legit_bastard
			FROM = { has_character_flag = flag_pil_complete }
		}
	}
	effect = {
		FROM = {
			clr_character_flag = flag_pil_complete
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			
			# Clear Evidence Flags
			clr_character_flag = flag_pil_evidence_appearance
			clr_character_flag = flag_pil_evidence_trait_present
			clr_character_flag = flag_pil_evidence_trait_missing
			clr_character_flag = flag_pil_evidence_mysterious_conception
			clr_character_flag = flag_pil_evidence_mysterious_conception_fake
			clr_character_flag = flag_pil_evidence_mother_lover
			clr_character_flag = flag_pil_evidence_green_dreams
			clr_character_flag = flag_pil_evidence_green_dreams_fake
			clr_character_flag = flag_pil_evidence_vision_in_flames
			clr_character_flag = flag_pil_evidence_vision_in_flames_fake
			
			set_variable = { which = "pil_evidence_count" value = 0 }
			
			# Clear decision flags
			clr_character_flag = flag_pil_confront_father
			clr_character_flag = flag_pil_send_ravens
			clr_character_flag = flag_pil_evidence_count_set
			clr_character_flag = flag_pil_regent_sieze_throne
			
			hidden_tooltip = {
				any_plot_backer = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}	
		}
		clr_character_flag = bastardised
		if = {
			limit = {
				NOT = { trait = bastard }
				NOT = { trait = legit_bastard }
			}
			add_character_modifier = {
				name = suspected_bastard
				duration = -1
			}			
		}	
		any_sibling = {
			limit = {
				NOT = { trait = bastard }
				NOT = { trait = legit_bastard }
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_implicated_sibling }
			}
			add_character_modifier = {
				name = suspected_bastard
				duration = -1
			}
		}
		hidden_tooltip = { any_sibling = { clr_character_flag = bastardised reverse_remove_opinion = { who = FROM modifier = opinion_implicated_sibling } } } 
	}
}
# Cut down a fellow vassal to size
plot_dynasty_claim = {
	type = realm_titles
	military_plot = yes
	
	# Plotter scope
	potential = {
		prisoner = no
		is_patrician = no
		liege = { 
			is_merchant_republic = no
			is_patrician = no
		}
		age = 16
		is_ruler = yes
		is_landed = yes
		higher_tier_than = BARON
		NOT = { trait = incapable }
		NOT = { trait = imbecile }
		OR = {
			crownlaw_title = {
				NOT = {
					OR = {
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
		}
		# # These would cause all kinds of problems
		can_press_claims_trigger = yes
	}
	
	target_potential = {
		higher_tier_than = COUNT
		holder_scope = {
			NOT = { dynasty = FROM }
			NOT = { reverse_has_truce = FROM  }
			any_vassal = {
				dynasty = FROM
				OR = {
					has_strong_claim = ROOT
					AND = {
						has_weak_claim = ROOT
						ROOT = {
							OR = {
								holder_scope = { has_regent = yes }
								AND = {
									PREV = { is_female = no }
									holder_scope ={ is_female = yes }
								}
								is_contested = yes # Is already being contested in some form of Claim or Succession War
								holder_scope = { trait = bastard }
								holder_scope = { reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_suspected_bastard } }
							}
						}	
					}
				}		
			}
			OR = {
				same_liege = FROM
				independent = yes
			}
			NOT = {
				spouse = { character = FROM }
				character = FROM
				overlord_of = FROM
			}
			is_within_diplo_range = FROM
		}
	}
	
	# Target scope
	allow = {	
		current_heir = {
			NOT = { character = FROM }
		}		
		# Honorable characters will only do this for kin with strong claims
		OR = {
			NOT = { FROM = { trait = honorable } }
			holder_scope = { 
				any_vassal = {
					dynasty = FROM
					has_strong_claim = ROOT
				}	
			}
		}
	}
	
	
	chance = {
		factor = 5
		
		modifier = {
			factor = 0
			holder_scope = { reverse_opinion = { who = FROM value = 50 } }	
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
		}	
		modifier = {
			factor = 0
			FROM = {
				religion = nath_pagan
				NOT = { trait = cynical }
			}	
		}
		modifier = {
			factor = 0
			holder_scope = {
				FROM = {
					is_close_relative = PREV
					OR = {
						opinion = { who = PREV value = 15 }
						trait = familyperson
					}
					NOT = { trait = ruthless }
				}
			}	
		}
		modifier = {
			factor = 0.01
			FROM = {
				trait = content
				NOT = { trait = lunatic } 
				NOT = { trait = possessed }
			}
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 5 } }	
		}
		modifier = {
			factor = 0.66
			FROM = { NOT = { intrigue = 8 } }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 14 }	
		}
		modifier = {
			factor = 1.33
			FROM = { intrigue = 17 }	
		}
		
		modifier = {
			factor = 5
			FROM = { trait = just } # If a just character actually can get this plot, be extra-willing to use it
		}
		modifier = {
			factor = 4
			FROM = { trait = ruthless }
		}	
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 2
			FROM = { trait = brave }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		
		modifier = {
			factor = 0.2
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		
		modifier = {
			factor = 0.3
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.56
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.68
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2.32
			holder_scope = { NOT = { reverse_opinion = { who = FROM value = -99 } } }
		}
		
		#Enemies
		modifier = {
			factor = 10
			holder_scope = { FROM = { is_foe = PREV } }
		}
		# Zealous character bonus chance vs. infidels
		modifier = {
			factor = 2
			FROM = { trait = zealous }
			holder_scope = { NOT = { religion = FROM } }
		}
		
		modifier = {
			factor = 0
			FROM = { war = yes }
		}
		
		modifier = {
			factor = 4
			FROM = { trait = familyperson }
		}
	}
	
	success = {
		holder_scope = {
			dynasty = FROM
		}
	}
	abort = {
		OR = {
			holder_scope = {
				OR = {
					spouse = { character = FROM }
					NOT = { higher_tier_than = COUNT }
					NOT = { any_vassal = { dynasty = FROM has_claim = ROOT } }
				}	
			}
			FROM = {
				OR = {
					is_ruler = no
					trait = incapable
				}
			}
			FROM = { has_character_flag = abort_plot }
		}
	}
	abort_effect = {
		FROM = {
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_dynasty_claim_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
	effect = {
		FROM = {
			if = {
				limit = {
					NOT = { intrigue = 10 }
				}
				change_intrigue = 1
			}
			any_plot_backer = {
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			# Clear flags
			hidden_tooltip = {
				clr_character_flag = plot_dynasty_claim_decision_taken
				clr_character_flag = abort_plot
				clr_character_flag = plot_check
			}
		}
	}
}

plot_escape_slavery = {
	type = realm_characters_plus
	intrigue_plot = yes
	
	potential = {
		trait = slave
		NOT = { trait = incapable }
		NOT = { trait = dragon }
		age = 14
		prisoner = no
		ai = yes
		OR = {
			trait = ambitious
			trait = brave
			trait = proud
			trait = dragon_rider
			trait = chosen_by_rhllor
			trait = favored_by_rhllor
			prestige = 400
			num_of_claims = 1
			has_character_flag = demon_child_non_pagan
			wealth = 40
		}
		#any_independent_ruler = { crownlaw_title = { has_law = slavery_0 } }
	}
	
	allow = {
		trait = slave_owner
		is_ruler = yes
		is_liege_of = FROM
		has_opinion_modifier = { who = FROM modifier = opinion_my_slave }
	}
	
	chance = {
		factor = 30
		
		modifier = {
			factor = 3
			FROM = { wealth = 100 }
		}
		# Slave's personality
		modifier = {
			factor = 6
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 4
			FROM = { trait = dragon_rider }
		}
		modifier = {
			factor = 4
			FROM = { trait = brave }
		}
		modifier = {
			factor = 4
			FROM = { trait = proud }
		}
		modifier = {
			factor = 4
			FROM = { trait = chosen_by_rhllor }
		}
		modifier = {
			factor = 4
			FROM = { has_character_flag = demon_child_non_pagan }
		}
		
		modifier = {
			factor = 0.05
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.2
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0
			FROM = {
				trait = just
				NOT = { trait = liberator }
				NOT = { has_antislavery_religion_trigger = yes }
				NOT = { has_antislavery_culture_trigger = yes }
				NOT = { trait = dragon_rider }
				NOT = { trait = ambitious }
				NOT = { trait = chosen_by_rhllor }
			}	
		}
		#Liege is likely to hurt me 
		modifier = {
			factor = 0.33
			trait = cruel
		}
		modifier = {
			factor = 0.33
			trait = ruthless
		}
		modifier = {
			factor = 0.33
			trait = impaler
		}
		#Liege is soft
		modifier = {
			factor = 3
			trait = kind
		}
		modifier = {
			factor = 3
			trait = honorable
		}
		# Slave's opinion of master
		modifier = {
			factor = 0
			reverse_opinion = { who = FROM value = 50 }
			FROM = {
				NOT = { trait = proud }				
				NOT = { trait = liberator }
				NOT = { has_antislavery_religion_trigger = yes }
				NOT = { has_antislavery_culture_trigger = yes }
				NOT = { trait = dragon_rider }
				NOT = { trait = ambitious }
				NOT = { trait = chosen_by_rhllor }
			}	
		}
		modifier = {
			factor = 0.5
			reverse_opinion = { who = FROM value = 50 }		
		}
		modifier = {
			factor = 0.65
			reverse_opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 0.65
			reverse_opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 1.5
			NOT = { reverse_opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 1.5
			NOT = { reverse_opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 1.5
			NOT = { reverse_opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 1.5
			NOT = { reverse_opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 1.5
			NOT = { reverse_opinion = { who = FROM value = -99 } }
		}
		
		# Previous failed escape attempt
		modifier = {
			factor = 0.1
			reverse_has_opinion_modifier = { who = FROM modifier = opinion_slave_attempted_escape }
		}
	}
	
	success = { FROM = { NOT = { trait = slave } } }
	effect = { 
		FROM = {
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = escape_slavery_decision
			clr_character_flag = buy_freedom_decision
		}
	}
	abort = {
		OR = {
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_my_slave } }
			is_ruler = no
			FROM = {
				OR = {
					ai = no # Slaves SHOULD always be unplayable
					has_character_flag = abort_plot
					prisoner = yes
					trait = incapable
					#NOT = { any_independent_ruler = { crownlaw_title = { has_law = slavery_0 } } }
				}
			}
		}	
	}
	abort_effect = {
		FROM = {
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = escape_slavery_decision
			clr_character_flag = buy_freedom_decision
		}
	}
}

plot_replace_regent = {
	type = realm_characters_plus
	#military_plot = yes	
	intrigue_plot = yes
	
	potential = {
		has_ambition = obj_become_regent
		NOT = {
			any_backed_character = {
				has_plot = plot_replace_regent
				same_liege = ROOT
			}
		}
		OR = {
			NOT = { has_character_flag = failed_regency_plot }
			had_character_flag = { flag = failed_regency_plot days = 2500 }
		}
		NOT = { trait = wikid }			
	}
	
	target_potential = {
		OR = {
			AND = { #replace existing regent
				same_liege = FROM
				OR = {
					has_minor_title = title_appointed_regent
					liege = { regent = { character = ROOT } }
				}
			}
			AND = { #try to get incompetent liege declared incapable
				is_liege_of = FROM
				has_regent = no
			}
		}
	}
	
	allow = {
		OR = {
			AND = { #replace existing regent
				same_liege = FROM
				NOT = { is_liege_of = FROM }
				NOT = { has_opinion_modifier = { who = FROM modifier = opinion_council_sponsor } }
				liege = { 
					OR = {
						has_regent = yes
						NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_refused_regent } } 
					}					
				}
			}
			AND = { #try to get incompetent liege declared incapable
				is_liege_of = FROM
				has_regent = no
				OR = {
					trait = inbred
					trait = imbecile
					trait = lunatic
					is_crippled_trigger = yes
					trait = infirm
					has_epidemic = yes
				}
			}
		}	
	}
	
	chance = {
		factor = 500
	}
	success = {
		FROM = { 
			OR = {
				AND = {
					has_minor_title = title_appointed_regent
					ROOT = { NOT = { is_liege_of = PREV } }
				}	
				liege = { regent = { character = PREVPREV } }
			}
		}
	}
	abort = {
		FROM = {
			OR = {
				NOT = {
					OR = {
						has_minor_title = title_appointed_regent
						liege = { regent = { character = PREVPREV } }
						AND = {
							has_ambition = obj_become_regent
							ROOT = { 
								same_liege = PREV
								OR = {
									has_minor_title = title_appointed_regent
									liege = { regent = { character = PREVPREV } }
								}
							}
						}
						AND = {
							has_ambition = obj_become_regent
							has_character_flag = regency_war
							war = yes
						}
						ROOT = { #try to get incompetent liege declared incapable
							is_liege_of = PREV
							has_regent = no
							OR = {
								trait = inbred
								trait = imbecile
								trait = lunatic
								is_crippled_trigger = yes
								has_epidemic = yes
							}
						}						
					}
				}
				has_character_flag = abort_plot
				has_character_flag = flag_job_petition_rejected
			}
		}	
	}
	abort_effect = {
		FROM = { 
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = regency_war
		}
		FROM = { 
			clr_character_flag = flag_job_petition_rejected
			clr_character_flag = flag_plot_replace_regent_decision
			clr_character_flag = plot_replace_regent_duel
			clr_character_flag = flag_plot_replace_regent_ultimatum
			clr_character_flag = flag_plot_replace_regent_plead_case
			clr_character_flag = duelist_courtier
		}
	}
	effect = {
		FROM = {
			clr_character_flag = flag_plot_replace_regent_decision
			clr_character_flag = plot_replace_regent_duel
			clr_character_flag = flag_plot_replace_regent_ultimatum
			clr_character_flag = flag_plot_replace_regent_plead_case
			clr_character_flag = abort_plot
			clr_character_flag = plot_check
			clr_character_flag = failed_regency_plot
			clr_character_flag = duelist_courtier
			clr_character_flag = regency_war
			any_plot_backer = {
				reverse_opinion = { who = FROM modifier = opinion_council_sponsor }
				if = {
					limit = { ROOT = { NOT = { is_liege_of = FROM } } }
					reverse_opinion = { who = ROOT modifier = opinion_rival_council_sponsor }
				}	
				hidden_tooltip = { 
					if = { #Opinion for services
						limit = {
							liege = { character = PREVPREV }
						}
						if = {
							limit = { NOT = { check_variable = { which = "services_rendered" value = 0.9 } } }
							set_character_flag = dirty_service #this service is unknown to the court
						}
						reverse_opinion = { modifier = opinion_service_rendered who = PREV years = 3 }
						change_variable = { which = "services_rendered" value = 0.5 }					
					}
				}
			}			
		}
		if = {
			limit = { NOT = { is_liege_of = FROM } }
			opinion = { who = FROM modifier = opinion_rival_council_candidate }
			any_realm_character = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
				reverse_opinion = { who = FROM modifier = opinion_rival_council_sponsor }
			}
			if = {
				limit = { NOT = { has_character_flag = flag_replaced_by_plot_event } }
				FROM = {
					liege = {
						any_realm_character = {
							limit = { any_backed_character = { character = FROM } }
							opinion = { who = PREV modifier = opinion_approved_council_candidate }
						}
					}
				}
			}
			if = {
				limit = { has_character_flag = flag_replaced_by_plot_event }
				liege = {
					any_realm_character = {
						limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_council_sponsor } }
						reverse_remove_opinion = { who = ROOT modifier = opinion_council_sponsor }
						reverse_opinion = { who = ROOT modifier = opinion_former_council_sponsor }
					}
				}	
				clr_character_flag = flag_replaced_by_plot_event
			}
		}	
	}
}